---
title: Información general de AllJoynCodeGen
author: saraclay
ms.author: saclayt
ms.date: 09/06/17
ms.topic: article
ms.prod: windows-iot
ms.technology: IoT
description: Obtenga información sobre AllJoynCodeGen, una herramienta de generación de código que genera un Windows Runtime componente completo mediante interfaces AllJoyn.
keywords: Windows IOT, AllJoyn
ms.openlocfilehash: c8e9f08c5565c7e4252e1b15858c08402eedb712
ms.sourcegitcommit: 2b4ce105834c294dcdd8f332ac8dd2732f4b5af8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/23/2019
ms.locfileid: "60167751"
---
> [!NOTE]
> <span data-ttu-id="2e448-104">Está viendo la documentación archivada.</span><span class="sxs-lookup"><span data-stu-id="2e448-104">You are viewing archived documentation.</span></span> <span data-ttu-id="2e448-105">AllJoyn ya no es compatible con Windows 10 IoT.</span><span class="sxs-lookup"><span data-stu-id="2e448-105">AllJoyn is no longer supported by Windows 10 IoT.</span></span> <span data-ttu-id="2e448-106">Si tiene preguntas, abra un problema en GitHub o envíenos sus comentarios en los comentarios siguientes.</span><span class="sxs-lookup"><span data-stu-id="2e448-106">For questions, please open an issue on GitHub or leave us feedback in the comments below.</span></span>

# <a name="alljoyncodegen-overview"></a><span data-ttu-id="2e448-107">Información general de AllJoynCodeGen</span><span class="sxs-lookup"><span data-stu-id="2e448-107">AllJoynCodeGen Overview</span></span>

<span data-ttu-id="2e448-108">Hemos creado una herramienta de generación de código, AllJoynCodeGen, que genera un componente Windows Runtime completo mediante una descripción XML de una o varias interfaces AllJoyn derivadas de una especificación o un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="2e448-108">We've created a code generation tool, AllJoynCodeGen, that generates a complete Windows Runtime component using an XML description of one or more AllJoyn interfaces derived from a specification or device.</span></span>

<span data-ttu-id="2e448-109">El componente de Windows Runtime generado por esta herramienta se puede usar en cualquier lenguaje compatible (JS C#, C++,/CX, etc.) mediante las API que están disponibles en la Windows SDK universal.</span><span class="sxs-lookup"><span data-stu-id="2e448-109">The Windows Runtime component generated by this tool can be consumed in any supported language (JS, C#, C++/CX, etc.) using APIs that are available in the Universal Windows SDK.</span></span> <span data-ttu-id="2e448-110">Esto significa que se puede usar el mismo componente en cualquier plataforma que tenga el paquete OneCore AllJoyn (servicio de enrutador y dll de la API de C). Un desarrollador puede usar el componente para crear un productor o un consumidor de esa interfaz.</span><span class="sxs-lookup"><span data-stu-id="2e448-110">This means that the same component can be used on any platform that has the AllJoyn OneCore package (router service and C API dll.) A developer can then use the component to create a producer and/or a consumer of that interface.</span></span> 

<span data-ttu-id="2e448-111">**Nota:**  Para obtener más información sobre las API de C de AllJoyn, puede descargar el SDK del núcleo de AllJoyn y la documentación en [AllSeen Alliance](http://go.microsoft.com/fwlink/?LinkId=524584).</span><span class="sxs-lookup"><span data-stu-id="2e448-111">**Note**  For more details about the AllJoyn C APIs, you can download the AllJoyn Core SDK and documentation at [The AllSeen Alliance](http://go.microsoft.com/fwlink/?LinkId=524584).</span></span>

## <a name="how-does-alljoyncodegen-work"></a><span data-ttu-id="2e448-112">¿Cómo funciona AllJoynCodeGen?</span><span class="sxs-lookup"><span data-stu-id="2e448-112">How does AllJoynCodeGen work?</span></span>

<span data-ttu-id="2e448-113">El flujo básico es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="2e448-113">The basic flow is as follows:</span></span>

1. <span data-ttu-id="2e448-114">Un archivo XML creado en el XML AllJoyn (actualmente, el formato dBu introspección) que describe el servicio se introduce en la herramienta CODEGEN.</span><span class="sxs-lookup"><span data-stu-id="2e448-114">An XML file authored in the AllJoyn XML (currently DBus introspection format) that describes the service is fed into the codegen tool.</span></span>
2. <span data-ttu-id="2e448-115">La herramienta AllJoynCodeGen genera código que da como resultado un componente de Windows Runtime.</span><span class="sxs-lookup"><span data-stu-id="2e448-115">The AllJoynCodeGen tool generates code that results in a Windows Runtime component.</span></span> <span data-ttu-id="2e448-116">Este código generado se basa en **MSAJAPI. lib** y [Windows. Devices. AllJoyn](https://msdn.microsoft.com/library/windows/apps/xaml/windows.devices.alljoyn.aspx) del SDK de Windows 10.</span><span class="sxs-lookup"><span data-stu-id="2e448-116">This generated code relies on **MSAJAPI.lib** and [Windows.Devices.AllJoyn](https://msdn.microsoft.com/library/windows/apps/xaml/windows.devices.alljoyn.aspx) from the Windows 10 SDK.</span></span>
3. <span data-ttu-id="2e448-117">El desarrollador crea una aplicación que consume este componente.</span><span class="sxs-lookup"><span data-stu-id="2e448-117">The developer builds an application that consumes this component.</span></span>
4. <span data-ttu-id="2e448-118">En tiempo de ejecución, la aplicación del desarrollador cargará el componente de Windows Runtime generado por la herramienta (por ejemplo: foo. dll,) así como los archivos dll **MSAJAPI. dll** y **Windows. Devices. AllJoyn. dll**.</span><span class="sxs-lookup"><span data-stu-id="2e448-118">At runtime, the developer's application will load the Windows Runtime component generated by the tool (e.g.: foo.dll,) as well as the in-box DLLs **MSAJAPI.dll** and **Windows.Devices.AllJoyn.dll**.</span></span>

<span data-ttu-id="2e448-119">El siguiente diagrama de flujo de trabajo ilustra este proceso:</span><span class="sxs-lookup"><span data-stu-id="2e448-119">The following workflow diagram illustrates this process:</span></span>

![Diagrama de la CodeGen de AllJoyn](../media/AllJoyn/alljoyncodegen.png)

## <a name="running-from-the-command-line"></a><span data-ttu-id="2e448-121">Ejecutar desde la línea de comandos</span><span class="sxs-lookup"><span data-stu-id="2e448-121">Running from the command line</span></span>

<span data-ttu-id="2e448-122">La herramienta AllJoynCodeGen existe actualmente como una herramienta de línea de comandos incluida con el SDK de Windows 10.</span><span class="sxs-lookup"><span data-stu-id="2e448-122">The AllJoynCodeGen tool currently exists as a command line tool shipped with the Windows 10 SDK.</span></span> <span data-ttu-id="2e448-123">Para ejecutar la herramienta, pase un archivo XML válido mediante la siguiente cadena:</span><span class="sxs-lookup"><span data-stu-id="2e448-123">To run the tool pass a valid XML file using the following string:</span></span>

    AllJoynCodeGen –i Foo.xml –o c:\users\developer1\documents\Foo\

## <a name="reviewing-the-output"></a><span data-ttu-id="2e448-124">Revisar la salida</span><span class="sxs-lookup"><span data-stu-id="2e448-124">Reviewing the output</span></span>

<span data-ttu-id="2e448-125">Las clases generadas ajustan la funcionalidad expuesta por la API básica de C.</span><span class="sxs-lookup"><span data-stu-id="2e448-125">The generated classes wrap functionality exposed by the Core C API.</span></span> <span data-ttu-id="2e448-126">Dado que el código generado es una abstracción, no se trata de una asignación de uno a uno.</span><span class="sxs-lookup"><span data-stu-id="2e448-126">Because the generated code is an abstraction, this is not a 1-to-1 mapping.</span></span> <span data-ttu-id="2e448-127">En la tabla siguiente se muestran C++ las API principales que incluyen cada clase de código generado.</span><span class="sxs-lookup"><span data-stu-id="2e448-127">The table below shows which Core C++ APIs are wrapped by each generated code class.</span></span> <span data-ttu-id="2e448-128">Los siguientes marcadores de posición se utilizan para los nombres generados en la tabla:</span><span class="sxs-lookup"><span data-stu-id="2e448-128">The following placeholders are used for generated names in the table:</span></span>

* <span data-ttu-id="2e448-129">`<Foo>`es el nombre de la interfaz definida en el archivo XML.</span><span class="sxs-lookup"><span data-stu-id="2e448-129">`<Foo>` is the name of the interface defined in the xml file</span></span>
* <span data-ttu-id="2e448-130">`<Signal>`es el nombre de una señal tomada del archivo XML</span><span class="sxs-lookup"><span data-stu-id="2e448-130">`<Signal>` is the name of a signal, taken from the xml file</span></span>
* <span data-ttu-id="2e448-131">`<Method>`es el nombre de un método, tomado del archivo XML.</span><span class="sxs-lookup"><span data-stu-id="2e448-131">`<Method>` is the name of a method, taken from the xml file</span></span>
* <span data-ttu-id="2e448-132">`<Property>`es el nombre de una propiedad tomada del archivo XML.</span><span class="sxs-lookup"><span data-stu-id="2e448-132">`<Property>` is the name of a property, taken from the xml file</span></span>


> | <span data-ttu-id="2e448-133">Windows Runtime (clase)</span><span class="sxs-lookup"><span data-stu-id="2e448-133">Windows Runtime Class</span></span> |  | <span data-ttu-id="2e448-134">Descripción</span><span class="sxs-lookup"><span data-stu-id="2e448-134">Description</span></span> | <span data-ttu-id="2e448-135">API C++ principal</span><span class="sxs-lookup"><span data-stu-id="2e448-135">Core C++ API</span></span> |
> | ------------------------ | --- | --------- | ---------- |
> | <span data-ttu-id="2e448-136">`<Foo>`Monitor</span><span class="sxs-lookup"><span data-stu-id="2e448-136">`<Foo>`Watcher</span></span> |  | <span data-ttu-id="2e448-137">Busca productores que anuncian el servicio de destino.</span><span class="sxs-lookup"><span data-stu-id="2e448-137">Searches for producers that advertise the target service</span></span> | <span data-ttu-id="2e448-138">Clase *BusListener* ; Clase *BusAttachment*</span><span class="sxs-lookup"><span data-stu-id="2e448-138">*BusListener* class; *BusAttachment* class</span></span> |
> | <span data-ttu-id="2e448-139">`<Foo>`JoinSessionResult</span><span class="sxs-lookup"><span data-stu-id="2e448-139">`<Foo>`JoinSessionResult</span></span> |  | <span data-ttu-id="2e448-140">Notifica si la combinación se ha realizado correctamente o no, y expone una `<Foo>Consumer` instancia de para la sesión si la combinación se realizó correctamente.</span><span class="sxs-lookup"><span data-stu-id="2e448-140">Reports the success or failure of joining a session, and exposes a `<Foo>Consumer` instance for the session if the join was successful.</span></span> | <span data-ttu-id="2e448-141">Clase *JoinSessionAsyncCB* ; *QStatus*</span><span class="sxs-lookup"><span data-stu-id="2e448-141">*JoinSessionAsyncCB* class; *QStatus*</span></span> |
> | <span data-ttu-id="2e448-142">`<Foo>`Creador</span><span class="sxs-lookup"><span data-stu-id="2e448-142">`<Foo>`Producer</span></span> |  | <span data-ttu-id="2e448-143">Anuncia un servicio y expone Controladores para eventos AllJoyn.</span><span class="sxs-lookup"><span data-stu-id="2e448-143">Advertises a service and exposes handlers for AllJoyn events.</span></span> | <span data-ttu-id="2e448-144">Clase *BusObject* ; Clase *BusAttachment* ; Clase *InterfaceDescription* ; Clase *SessionPortListener* ; *Message* (clase)</span><span class="sxs-lookup"><span data-stu-id="2e448-144">*BusObject* class; *BusAttachment* class; *InterfaceDescription* class; *SessionPortListener* class; *Message* class</span></span> |
> | <span data-ttu-id="2e448-145">`<Foo>`Simultáneamente</span><span class="sxs-lookup"><span data-stu-id="2e448-145">`<Foo>`Signals</span></span> |  | <span data-ttu-id="2e448-146">Expone métodos y controladores para enviar y recibir señales.</span><span class="sxs-lookup"><span data-stu-id="2e448-146">Exposes methods and handlers to send and receive signals.</span></span> <span data-ttu-id="2e448-147">Lo usan los productores y los consumidores.</span><span class="sxs-lookup"><span data-stu-id="2e448-147">Used by both producers and consumers.</span></span> | <span data-ttu-id="2e448-148">Clase *BusObject* ; Clase *InterfaceDescription* ; *Message* (clase)</span><span class="sxs-lookup"><span data-stu-id="2e448-148">*BusObject* class; *InterfaceDescription* class; *Message* class</span></span> |
> | <span data-ttu-id="2e448-149">`<Foo>`Independiente</span><span class="sxs-lookup"><span data-stu-id="2e448-149">`<Foo>`Consumer</span></span> |  | <span data-ttu-id="2e448-150">Interactúa con un servicio una vez detectado.</span><span class="sxs-lookup"><span data-stu-id="2e448-150">Interacts with a service after it has been discovered.</span></span> | <span data-ttu-id="2e448-151">Clase *ProxyBusObject* ; Clase *InterfaceDescription* ; Clase *SessionListener* ; *Message* (clase)</span><span class="sxs-lookup"><span data-stu-id="2e448-151">*ProxyBusObject* class; *InterfaceDescription* class; *SessionListener* class; *Message* class</span></span> |
> | <span data-ttu-id="2e448-152">`<Foo>``<Method>`CalledEventArgs</span><span class="sxs-lookup"><span data-stu-id="2e448-152">`<Foo>``<Method>`CalledEventArgs</span></span> |  | <span data-ttu-id="2e448-153">Argumentos pasados a métodos en `EventAdapters.<Foo>ServiceEventAdapter`.</span><span class="sxs-lookup"><span data-stu-id="2e448-153">Arguments passed to methods in `EventAdapters.<Foo>ServiceEventAdapter`.</span></span> | <span data-ttu-id="2e448-154">*Message* (clase)</span><span class="sxs-lookup"><span data-stu-id="2e448-154">*Message* class</span></span> |
> | <span data-ttu-id="2e448-155">`<Foo>``<Method>`Da</span><span class="sxs-lookup"><span data-stu-id="2e448-155">`<Foo>``<Method>`Result</span></span> |  | <span data-ttu-id="2e448-156">Lo usan las implementaciones de métodos<Foo>en el servicio I para informar del éxito o error de la llamada, así como de los valores devueltos.</span><span class="sxs-lookup"><span data-stu-id="2e448-156">Used by method implementations in I<Foo>Service to report the success or failure of the call, as well as any return values.</span></span> | <span data-ttu-id="2e448-157">Clase de *mensaje* ; *QStatus*</span><span class="sxs-lookup"><span data-stu-id="2e448-157">*Message* class; *QStatus*</span></span> |
> | <span data-ttu-id="2e448-158">`<Foo>``<Signal>`ReceivedEventArgs</span><span class="sxs-lookup"><span data-stu-id="2e448-158">`<Foo>``<Signal>`ReceivedEventArgs</span></span> |  | <span data-ttu-id="2e448-159">Argumentos pasados a una señal en <Foo>señales.</span><span class="sxs-lookup"><span data-stu-id="2e448-159">Arguments passed to a signal in <Foo>Signals.</span></span> | <span data-ttu-id="2e448-160">*Message* (clase)</span><span class="sxs-lookup"><span data-stu-id="2e448-160">*Message* class</span></span> |


## <a name="build-guide"></a><span data-ttu-id="2e448-161">Guía de compilación</span><span class="sxs-lookup"><span data-stu-id="2e448-161">Build guide</span></span>

#### <a name="creating-the-component"></a><span data-ttu-id="2e448-162">Crear el componente</span><span class="sxs-lookup"><span data-stu-id="2e448-162">Creating the component</span></span>

<span data-ttu-id="2e448-163">El código generado debe estar incluido en un componente que comparta el mismo nombre de interfaz que el XML.</span><span class="sxs-lookup"><span data-stu-id="2e448-163">The generated code needs to be contained in a component that shares the same interface name as the XML.</span></span> <span data-ttu-id="2e448-164">Por ejemplo, si el XML de un sistema tostador se define como com. Microsoft. sample. tostador, crearía un componente de tiempo de ejecución com. Microsoft. sample.</span><span class="sxs-lookup"><span data-stu-id="2e448-164">For example, if the XML for a toaster is defined as com.microsoft.sample.toaster, we would create a runtime component com.microsoft.sample.</span></span> 

<span data-ttu-id="2e448-165">Como alternativa, puede asignar al componente el nombre que desee (por ejemplo, fooCodeGenComponent), pero debe actualizar manualmente el espacio de nombres raíz en las propiedades del proyecto para que sea el mismo que el nombre de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="2e448-165">Alternatively, you can name the component whatever you want (e.g. fooCodeGenComponent), but you must manually update the root namespace under the Project properties to be the same as the interface name.</span></span>

> [!TIP]
> <span data-ttu-id="2e448-166">Puede encontrar el espacio de nombres raíz en el archivo PCH. h que se genera a partir de la herramienta AllJoynCodeGen.</span><span class="sxs-lookup"><span data-stu-id="2e448-166">You can find the root namespace in the pch.h file that is generated from the AllJoynCodeGen tool.</span></span>
