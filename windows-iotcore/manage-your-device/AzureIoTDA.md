---
title: Agente de dispositivos IoT de Azure
author: rcheeran
ms.author: rcheeran
ms.date: 06/25/2019
ms.topic: article
description: Obtenga información sobre cómo administrar los dispositivos con el agente de dispositivos IoT de Azure en Windows IoT.
keywords: Windows IOT, Azure IoT, agente de dispositivos de Azure, administración de dispositivos, administración remota
ms.openlocfilehash: 4f7336cd1c4c2af903c0a74254e1b8e73ff077b9
ms.sourcegitcommit: 823ca02f515a577a2bdc469602a228365cb6ebf8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/28/2019
ms.locfileid: "67467687"
---
# <a name="azure-iot-device-agent"></a><span data-ttu-id="810fa-104">Agente de dispositivos IoT de Azure</span><span class="sxs-lookup"><span data-stu-id="810fa-104">Azure IoT Device Agent</span></span>

<span data-ttu-id="810fa-105">En cuanto a los dispositivos conectados, la administración remota de dispositivos es una de las características clave que los operadores de sistema necesitan.</span><span class="sxs-lookup"><span data-stu-id="810fa-105">When it comes to connected devices, remote device management is one of the key features that system operators need.</span></span> <span data-ttu-id="810fa-106">Permite a los operadores configurar propiedades y actualizar el software en el dispositivo de forma remota, sin necesidad de tener acceso local o físico al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="810fa-106">It enables operators to configure properties and update software on the device remotely, without the need to have local or physical access to the device.</span></span> <span data-ttu-id="810fa-107">Con Windows IoT Core y Windows IoT Enterprise que se ejecutan en dispositivos como dispositivos domésticos, sistemas HVAC y otros, es necesario disponer de una solución de administración de dispositivos ligera y personalizable.</span><span class="sxs-lookup"><span data-stu-id="810fa-107">With Windows IoT Core and Windows IoT Enterprise running on devices such as home appliances, HVAC systems and others, there is a need for a customizable, light weight device management solution.</span></span> <span data-ttu-id="810fa-108">Aunque las versiones de Windows 10 ya ofrecen administración de dispositivos móviles (MDM) basadas en [OMA DM](https://en.wikipedia.org/wiki/OMA_Device_Management), se usa principalmente en soluciones empresariales con herramientas de administración como SCCM o Intune.</span><span class="sxs-lookup"><span data-stu-id="810fa-108">While Windows 10 versions already offers Mobile Device Management (MDM) based on [OMA DM](https://en.wikipedia.org/wiki/OMA_Device_Management), this is mainly utilized in enterprise solutions with management tools such as SCCM or Intune.</span></span> <span data-ttu-id="810fa-109">Aunque esas soluciones son adecuadas para los dispositivos que se encuentran en una configuración empresarial, tienen desafíos en la configuración más diversa que vemos en las soluciones de IoT.</span><span class="sxs-lookup"><span data-stu-id="810fa-109">While those solutions are well suited for devices placed in an enterprise setting, it has challenges in the more diverse settings that we see in IoT solutions.</span></span> <span data-ttu-id="810fa-110">Los dispositivos de IoT también requieren una solución de administración de dispositivos ligera y pequeña, lo que puede ser un reto.</span><span class="sxs-lookup"><span data-stu-id="810fa-110">IoT devices also require a lightweight, small footprint device management solution which can be a challenge.</span></span> <span data-ttu-id="810fa-111">Microsoft también ofrece funcionalidades de administración de dispositivos con [Azure IOT Hub](https://docs.microsoft.com/azure/iot-hub/iot-hub-device-management-overview) y su [SDK](https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-sdks). El [agente de dispositivos IOT de Azure](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md) reúne estas capacidades: capacidades de administración de dispositivos en la nube a través del IOT Hub que funciona con los mismos [proveedores de servicios de configuración (CSP)](https://docs.microsoft.com/en-us/windows/client-management/mdm/configuration-service-provider-reference) estándar que usa la administración de dispositivos móviles.</span><span class="sxs-lookup"><span data-stu-id="810fa-111">Microsoft also offers device management capabilities using [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/iot-hub-device-management-overview) and its [SDK](https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-sdks).The [Azure IoT Device Agent](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md) brings both these capabilities together: device management capabilities in the cloud via the IoT Hub which works with the same standard [Configuration Service Providers(CSP)](https://docs.microsoft.com/en-us/windows/client-management/mdm/configuration-service-provider-reference) as used by Mobile Device Management.</span></span> <span data-ttu-id="810fa-112">Con el agente de dispositivos de Azure, los OEM pueden compilar dispositivos que ofrecen estas capacidades de administración de dispositivos sin necesidad de escribir ningún código.</span><span class="sxs-lookup"><span data-stu-id="810fa-112">With the Azure Device Agent, OEMs can build devices that offer these device management capabilities without writing any code.</span></span> 

<span data-ttu-id="810fa-113">El agente de dispositivos de Azure es un paquete de código abierto listo para compilar que habilita las funcionalidades de administración de dispositivos remotos.</span><span class="sxs-lookup"><span data-stu-id="810fa-113">The Azure Device Agent is a ready-to-build open-source package that enables remote device management capabilities.</span></span> <span data-ttu-id="810fa-114">Azure Device Agent es compatible con Windows 10 IoT Core y Windows 10 IoT Enterprise y funciona en dispositivos conectados a través de la IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="810fa-114">The Azure Device Agent is supported on Windows 10 IoT Core and Windows 10 IoT Enterprise and works on devices connected via the IoT Hub.</span></span> <span data-ttu-id="810fa-115">Los OEM ahora pueden compilar dispositivos que admitan SCCM, Intune o Azure IoT Hub para la administración de dispositivos y dejar que los clientes seleccionen la solución de administración de dispositivos que mejor se adapten a ellos.</span><span class="sxs-lookup"><span data-stu-id="810fa-115">OEMs can now build devices that support SCCM, Intune or Azure IoT Hub for device management and leave it up to their customers to select the device management solution that fits them best.</span></span>   

![Azure IoT Hub la administración de dispositivos](../media/AzureIoTDM/azureDM.png)


## <a name="how-does-it-work"></a><span data-ttu-id="810fa-117">¿Cómo funciona?</span><span class="sxs-lookup"><span data-stu-id="810fa-117">How does it work?</span></span>

<span data-ttu-id="810fa-118">El [agente de dispositivos IOT de Azure](https://aka.ms/iot-core-azure-dm-client) consta de dos componentes principales.</span><span class="sxs-lookup"><span data-stu-id="810fa-118">The [Azure IoT Device Agent](https://aka.ms/iot-core-azure-dm-client) consists of 2 core components.</span></span> 

<span data-ttu-id="810fa-119">El cliente del servicio Device provisioning (cliente DPS) automatiza el aprovisionamiento de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="810fa-119">The Device Provisioning Service Client (DPS Client) automates device provisioning.</span></span> <span data-ttu-id="810fa-120">Se conecta al servicio Azure Device provisioning con la clave de inscripción del dispositivo e DPS ScopeID.</span><span class="sxs-lookup"><span data-stu-id="810fa-120">It connects to the Azure Device Provisioning Service with the device's Enrollment Key and DPS ScopeID.</span></span> <span data-ttu-id="810fa-121">El servicio DPS de Azure identifica el dispositivo y lo aprovisiona en el IoT Hub configurado y devuelve una cadena de conexión al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="810fa-121">The Azure DPS service identifies the device and provisions it in the configured IoT Hub and returns a connection string back to the device.</span></span> <span data-ttu-id="810fa-122">Después, el cliente de DPS usa esta cadena de conexión para conectar el dispositivo a la derecha IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="810fa-122">The DPS client then uses this connection string to connect the device to the right IoT Hub.</span></span>  

<span data-ttu-id="810fa-123">El cliente de administración de dispositivos habilita las funcionalidades de administración de dispositivos remotos mediante [proveedores de servicios de configuración](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/configuration-service-provider-reference), CSP). las capacidades de administración remota del agente de dispositivos de Azure admiten un modelo de complemento que permite seleccionar solo el capacidades que necesita.</span><span class="sxs-lookup"><span data-stu-id="810fa-123">The Device Management Client enables remote device management capabilities using the [Configuration Service Providers](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/configuration-service-provider-reference), CSP) The Azure Device Agent's remote management capabilities supports a plug-in model which allows you to select only the capabilities you need.</span></span> <span data-ttu-id="810fa-124">Además, la arquitectura del complemento es ampliable.</span><span class="sxs-lookup"><span data-stu-id="810fa-124">In addition to that, the plug-in architecture is extendable.</span></span> <span data-ttu-id="810fa-125">Puede escribir su propio complemento para una funcionalidad de administración de dispositivos que necesite y agregarlo al agente de dispositivos de Azure.</span><span class="sxs-lookup"><span data-stu-id="810fa-125">You can write your own plug-in for a device management capability that you need and add it to the Azure Device Agent.</span></span> <span data-ttu-id="810fa-126">Todas las funcionalidades de administración de dispositivos se pueden acceder de forma remota mediante los comandos y las propiedades de los módulos gemelas o del módulo, lo que permite un enfoque de administración de un solo panel de cristal para todos los dispositivos de Windows IoT.</span><span class="sxs-lookup"><span data-stu-id="810fa-126">All the device management capabilities are remotely accessible using the Device Twin or Module Twin properties and commands, thereby enabling a single-pane-of-glass management approach for all your Windows IoT devices.</span></span> <span data-ttu-id="810fa-127">[Para obtener](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/reference.md) una lista completa de las capacidades de administración de dispositivos disponibles, consulte</span><span class="sxs-lookup"><span data-stu-id="810fa-127">For a complete list of device management capabilities available refer to [this](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/reference.md)</span></span>

<span data-ttu-id="810fa-128">Además, el agente de dispositivos de Azure también crea y administra tokens de SAS para otras aplicaciones UWP que se ejecutan en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="810fa-128">In addition to this, the Azure Device Agent also creates and manages SAS tokens for other UWP applications running on the device.</span></span> <span data-ttu-id="810fa-129">El agente de dispositivos de Azure puede aprovisionar otras aplicaciones UWP como un dispositivo gemela o como un módulo gemela y agregar sus cadenas de conexión a las ranuras de TPM respectivas.</span><span class="sxs-lookup"><span data-stu-id="810fa-129">The Azure Device Agent can provision other UWP apps as either a Device Twin or as a Module Twin and add their connection strings to the respective TPM slots.</span></span> <span data-ttu-id="810fa-130">La aplicación UWP aprovecha el [puente UWP](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/uwp-bridge.md) para leer su cadena de conexión de la ranura TPM y puede utilizarla para conectarse al IOT Hub.</span><span class="sxs-lookup"><span data-stu-id="810fa-130">The UWP app leverages the [UWP Bridge](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/uwp-bridge.md) to read their connection string from the TPM slot and can use that to connect to the IoT Hub.</span></span> 

## <a name="how-to-get-started"></a><span data-ttu-id="810fa-131">¿Cómo empezar?</span><span class="sxs-lookup"><span data-stu-id="810fa-131">How to get started?</span></span>

<span data-ttu-id="810fa-132">El agente de dispositivos IoT de Azure está disponible en GitHub.</span><span class="sxs-lookup"><span data-stu-id="810fa-132">The Azure IoT Device Agent is available on GitHub.</span></span> <span data-ttu-id="810fa-133">El proyecto también incluye ejemplos para empezar a trabajar rápidamente.</span><span class="sxs-lookup"><span data-stu-id="810fa-133">The project also includes samples to get started quickly.</span></span> <span data-ttu-id="810fa-134">Para obtener más información, consulte nuestro [repositorio](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md) de github.</span><span class="sxs-lookup"><span data-stu-id="810fa-134">For more information, check out our GitHub [repo](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md)</span></span>

## <a name="migrating-from-azure-device-agent-v1-to-v2"></a><span data-ttu-id="810fa-135">Migración desde Azure Device Agent v1 a V2</span><span class="sxs-lookup"><span data-stu-id="810fa-135">Migrating from Azure Device Agent V1 to V2</span></span>
<span data-ttu-id="810fa-136">Si actualmente usa la versión V1 del agente de dispositivos, un cambio significativo entre V1 y V2 es que, en la versión V2, el agente de dispositivos de Azure ya no comparte la conexión con una aplicación de UWP.</span><span class="sxs-lookup"><span data-stu-id="810fa-136">If you are currently using the v1 version of the Device Agent, one significant change between V1 and V2 is that in the V2 version, the Azure Device Agent no longer shares the connection with an UWP app.</span></span> <span data-ttu-id="810fa-137">Con mejoras en el IoT Hub puede tener ahora la aplicación para UWP y el agente de dispositivos de Azure que tienen cadenas de conexión independientes y que todavía están asociadas con el mismo dispositivo en IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="810fa-137">With enhancements to the IoT Hub you can now have both the UWP app and the Azure Device Agent have independent connection strings and still be associated with the same device in IoT Hub.</span></span> <span data-ttu-id="810fa-138">Consulte [aquí](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/migration-from-old-client.md) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="810fa-138">Refer [here](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/migration-from-old-client.md) for more details.</span></span>

<span data-ttu-id="810fa-139">Para más información sobre Azure Device Agent v1, consulte [aquí](https://docs.microsoft.com/en-us/windows/iot-core/manage-your-device/azureiotdm).</span><span class="sxs-lookup"><span data-stu-id="810fa-139">For more information on the Azure Device Agent V1, refer [here](https://docs.microsoft.com/en-us/windows/iot-core/manage-your-device/azureiotdm).</span></span>

## <a name="other-useful-tools"></a><span data-ttu-id="810fa-140">Otras herramientas útiles</span><span class="sxs-lookup"><span data-stu-id="810fa-140">Other Useful Tools</span></span> 
### <a name="dm-mock-portal"></a><span data-ttu-id="810fa-141">Portal ficticio de DM</span><span class="sxs-lookup"><span data-stu-id="810fa-141">DM Mock Portal</span></span>
<span data-ttu-id="810fa-142">El [portal ficticio de DM](https://github.com/ms-iot/azure-client-tools/blob/master/docs/dm-mock-portal/dm-mock-portal.md) es una aplicación que se puede usar para establecer las propiedades gemelas de un dispositivo o de módulo en un dispositivo individual o en varios dispositivos, mediante las funciones de administración automática de dispositivos del IOT Hub.</span><span class="sxs-lookup"><span data-stu-id="810fa-142">[DM Mock Portal](https://github.com/ms-iot/azure-client-tools/blob/master/docs/dm-mock-portal/dm-mock-portal.md) is an application which can be used to set Device Twin or Module Twin properties on an individual device or across multiple devices, using the IoT Hub’s Automatic Device Management capabilities.</span></span> 

### <a name="tpm-tool---limpetexe"></a><span data-ttu-id="810fa-143">Herramienta TPM: limpet. exe</span><span class="sxs-lookup"><span data-stu-id="810fa-143">TPM Tool - Limpet.exe</span></span>
<span data-ttu-id="810fa-144">El servicio Azure Device Provisioning permite a los clientes asociar y configurar automáticamente un dispositivo con un IoT Hub posterior a la producción.</span><span class="sxs-lookup"><span data-stu-id="810fa-144">The Azure Device Provisioning Service allows customers to automatically associate and configure a device with an IoT Hub post-production.</span></span> <span data-ttu-id="810fa-145">En este proceso, el servicio Device provisioning necesitará un identificador de dispositivo único y desafiable para ayudar a configurar el dispositivo de forma segura cuando el dispositivo se ponga en funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="810fa-145">For this process, Device Provisioning Service will need a unique and challengeable device ID to help configure the device securely when the device is put in operation.</span></span> <span data-ttu-id="810fa-146">El servicio Device provisioning usa la clave de aprobación pública (EKeyPub) del TPM para este fin.</span><span class="sxs-lookup"><span data-stu-id="810fa-146">Device Provisioning Service uses the TPM’s public Endorsement Key (EKeyPub) for this purpose.</span></span> <span data-ttu-id="810fa-147">Para registrar el dispositivo con DPS, el EKeyPub debe recolectarse desde el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="810fa-147">To register the device with DPS, the EKeyPub needs to be harvested from the device.</span></span> <span data-ttu-id="810fa-148">La hora preferida para este paso es durante la producción (durante las pruebas de final de línea del dispositivo).</span><span class="sxs-lookup"><span data-stu-id="810fa-148">The preferred time for this step is during production (during end-of-line testing of the device).</span></span> <span data-ttu-id="810fa-149">Sin embargo, el proceso también puede realizarse después de la producción si es necesario.</span><span class="sxs-lookup"><span data-stu-id="810fa-149">However, the process can also be done post-production if needed.</span></span>  

<span data-ttu-id="810fa-150">Microsoft proporciona la herramienta limpet para simplificar el proceso de registro del servicio Device provisioning.</span><span class="sxs-lookup"><span data-stu-id="810fa-150">Microsoft provides the Limpet tool to streamline the Device Provisioning Service registration process.</span></span> <span data-ttu-id="810fa-151">En función de la configuración de fabricación, si hay una conexión en línea disponible, el dispositivo se puede registrar mediante limpet directamente con el servicio Device provisioning o limpet puede recopilar el EKeyPub para un registro posterior sin conexión del dispositivo con el dispositivo. Servicio de aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="810fa-151">Depending on your manufacturing setup, if there is an online connection available, the device can be registered using Limpet directly with Device Provisioning Service, or Limpet can harvest the EKeyPub for a later, offline registration of the device with Device Provisioning Service.</span></span>

<span data-ttu-id="810fa-152">Para más información sobre el proceso de registro del servicio Device provisioning con limpet, consulte este [repositorio](https://github.com/ms-iot/azure-client-tools/blob/master/docs/limpet/limpet.md).</span><span class="sxs-lookup"><span data-stu-id="810fa-152">For more details on the Device Provisioning Service registration process with Limpet, see this [repo](https://github.com/ms-iot/azure-client-tools/blob/master/docs/limpet/limpet.md).</span></span>

<span data-ttu-id="810fa-153">Sin Limpet cuenta con licencia de código abierto MIT.</span><span class="sxs-lookup"><span data-stu-id="810fa-153">License: Limpet is licensed under the MIT open source license.</span></span> 
