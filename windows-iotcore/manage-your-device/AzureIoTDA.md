---
title: Agente de dispositivo IoT de Azure
author: rcheeran
ms.author: rcheeran
ms.date: 06/25/2019
ms.topic: article
description: Obtenga información sobre cómo administrar los dispositivos mediante el agente de dispositivo IoT de Azure en Windows IoT.
keywords: Windows iot, IoT de Azure, Azure agente de dispositivos, administración de dispositivos, administración remota
ms.openlocfilehash: 4f7336cd1c4c2af903c0a74254e1b8e73ff077b9
ms.sourcegitcommit: 823ca02f515a577a2bdc469602a228365cb6ebf8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/28/2019
ms.locfileid: "67467687"
---
# <a name="azure-iot-device-agent"></a><span data-ttu-id="88492-104">Agente de dispositivo IoT de Azure</span><span class="sxs-lookup"><span data-stu-id="88492-104">Azure IoT Device Agent</span></span>

<span data-ttu-id="88492-105">En cuanto a los dispositivos conectados, administración de dispositivo remoto es una de las características clave que necesitan de operadores de sistema.</span><span class="sxs-lookup"><span data-stu-id="88492-105">When it comes to connected devices, remote device management is one of the key features that system operators need.</span></span> <span data-ttu-id="88492-106">Permite a los operadores configurar propiedades y actualización de software en el dispositivo de forma remota, sin necesidad de tener acceso local o físico al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="88492-106">It enables operators to configure properties and update software on the device remotely, without the need to have local or physical access to the device.</span></span> <span data-ttu-id="88492-107">Con Windows IoT Core y Windows IoT Enterprise que se ejecutan en dispositivos como aparatos domésticos, sistemas HVAC y otros usuarios, es necesario para una solución de administración de dispositivos ligeros personalizable.</span><span class="sxs-lookup"><span data-stu-id="88492-107">With Windows IoT Core and Windows IoT Enterprise running on devices such as home appliances, HVAC systems and others, there is a need for a customizable, light weight device management solution.</span></span> <span data-ttu-id="88492-108">Mientras que las versiones de Windows 10 ya ofrece Mobile Device Management (MDM) en función de [OMA DM](https://en.wikipedia.org/wiki/OMA_Device_Management), esto se utiliza principalmente en soluciones empresariales con herramientas de administración como SCCM o Intune.</span><span class="sxs-lookup"><span data-stu-id="88492-108">While Windows 10 versions already offers Mobile Device Management (MDM) based on [OMA DM](https://en.wikipedia.org/wiki/OMA_Device_Management), this is mainly utilized in enterprise solutions with management tools such as SCCM or Intune.</span></span> <span data-ttu-id="88492-109">Aunque estas soluciones son adecuadas para los dispositivos que se colocan en un entorno empresarial, plantea desafíos en la configuración más diverso que vemos en soluciones de IoT.</span><span class="sxs-lookup"><span data-stu-id="88492-109">While those solutions are well suited for devices placed in an enterprise setting, it has challenges in the more diverse settings that we see in IoT solutions.</span></span> <span data-ttu-id="88492-110">Los dispositivos de IoT también requieren una solución de administración de dispositivo de superficie ligera, pequeño que puede ser un desafío.</span><span class="sxs-lookup"><span data-stu-id="88492-110">IoT devices also require a lightweight, small footprint device management solution which can be a challenge.</span></span> <span data-ttu-id="88492-111">Microsoft también ofrece dispositivo capacidades de administración usando [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/iot-hub-device-management-overview) y su [SDK](https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-sdks). El [agente de dispositivo IoT de Azure](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md) reúne ambas funciones: las funcionalidades de administración de dispositivos en la nube a través de IoT Hub que funciona con el mismo estándar [Configuration Service Providers(CSP)](https://docs.microsoft.com/en-us/windows/client-management/mdm/configuration-service-provider-reference) ya que usa administración de dispositivos móviles.</span><span class="sxs-lookup"><span data-stu-id="88492-111">Microsoft also offers device management capabilities using [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/iot-hub-device-management-overview) and its [SDK](https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-sdks).The [Azure IoT Device Agent](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md) brings both these capabilities together: device management capabilities in the cloud via the IoT Hub which works with the same standard [Configuration Service Providers(CSP)](https://docs.microsoft.com/en-us/windows/client-management/mdm/configuration-service-provider-reference) as used by Mobile Device Management.</span></span> <span data-ttu-id="88492-112">Con el agente de dispositivo de Azure, los OEM pueden crear los dispositivos que ofrecen estas capacidades de administración de dispositivos sin escribir ningún código.</span><span class="sxs-lookup"><span data-stu-id="88492-112">With the Azure Device Agent, OEMs can build devices that offer these device management capabilities without writing any code.</span></span> 

<span data-ttu-id="88492-113">El agente de dispositivos de Azure es un paquete de código abierto listo para la compilación que permite capacidades de administración de dispositivo remoto.</span><span class="sxs-lookup"><span data-stu-id="88492-113">The Azure Device Agent is a ready-to-build open-source package that enables remote device management capabilities.</span></span> <span data-ttu-id="88492-114">El agente de dispositivo de Azure es compatible con Windows 10 IoT Core y Windows 10 IoT Enterprise y funciona en los dispositivos conectados a través de IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="88492-114">The Azure Device Agent is supported on Windows 10 IoT Core and Windows 10 IoT Enterprise and works on devices connected via the IoT Hub.</span></span> <span data-ttu-id="88492-115">Los OEM pueden crear ahora dispositivos compatibles con SCCM, Intune o Azure IoT Hub para administración de dispositivos y dejar en manos de sus clientes para seleccionar la solución de administración de dispositivos que se adapte a su mejor.</span><span class="sxs-lookup"><span data-stu-id="88492-115">OEMs can now build devices that support SCCM, Intune or Azure IoT Hub for device management and leave it up to their customers to select the device management solution that fits them best.</span></span>   

![Administración de dispositivos de IOT de Azure](../media/AzureIoTDM/azureDM.png)


## <a name="how-does-it-work"></a><span data-ttu-id="88492-117">¿Cómo funciona?</span><span class="sxs-lookup"><span data-stu-id="88492-117">How does it work?</span></span>

<span data-ttu-id="88492-118">El [agente de dispositivo IoT de Azure](https://aka.ms/iot-core-azure-dm-client) consta de 2 componentes principales.</span><span class="sxs-lookup"><span data-stu-id="88492-118">The [Azure IoT Device Agent](https://aka.ms/iot-core-azure-dm-client) consists of 2 core components.</span></span> 

<span data-ttu-id="88492-119">El cliente del servicio de aprovisionamiento de dispositivos (cliente de DPS) automatiza el aprovisionamiento de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="88492-119">The Device Provisioning Service Client (DPS Client) automates device provisioning.</span></span> <span data-ttu-id="88492-120">Se conecta al servicio Azure Device Provisioning con ScopeID DPS y la clave de inscripción del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="88492-120">It connects to the Azure Device Provisioning Service with the device's Enrollment Key and DPS ScopeID.</span></span> <span data-ttu-id="88492-121">El servicio DPS Azure identifica el dispositivo y lo aprovisiona en el centro de IoT configurado y devuelve una cadena de conexión al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="88492-121">The Azure DPS service identifies the device and provisions it in the configured IoT Hub and returns a connection string back to the device.</span></span> <span data-ttu-id="88492-122">El cliente DPS, a continuación, utiliza esta cadena de conexión para conectar el dispositivo a la versión apropiada de IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="88492-122">The DPS client then uses this connection string to connect the device to the right IoT Hub.</span></span>  

<span data-ttu-id="88492-123">El cliente de administración de dispositivos permite funcionalidades de administración de dispositivos remotos mediante el [proveedores de servicios de configuración](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/configuration-service-provider-reference), CSP) capacidades de administración remota del agente de la Azure dispositivo es compatible con un modelo de complemento que permite a Seleccione solo las capacidades que necesita.</span><span class="sxs-lookup"><span data-stu-id="88492-123">The Device Management Client enables remote device management capabilities using the [Configuration Service Providers](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/configuration-service-provider-reference), CSP) The Azure Device Agent's remote management capabilities supports a plug-in model which allows you to select only the capabilities you need.</span></span> <span data-ttu-id="88492-124">Además de eso, la arquitectura de complementos es extensible.</span><span class="sxs-lookup"><span data-stu-id="88492-124">In addition to that, the plug-in architecture is extendable.</span></span> <span data-ttu-id="88492-125">Puede escribir su propio complemento para una funcionalidad de administración del dispositivo que necesita y agregarlo al agente de dispositivo de Azure.</span><span class="sxs-lookup"><span data-stu-id="88492-125">You can write your own plug-in for a device management capability that you need and add it to the Azure Device Agent.</span></span> <span data-ttu-id="88492-126">Todas las capacidades de administración de dispositivos son accesibles de forma remota con el dispositivo gemelo o las propiedades del módulo gemelo y comandos, lo que permite un enfoque de administración único panel de vidrio para todos los dispositivos de Windows IoT.</span><span class="sxs-lookup"><span data-stu-id="88492-126">All the device management capabilities are remotely accessible using the Device Twin or Module Twin properties and commands, thereby enabling a single-pane-of-glass management approach for all your Windows IoT devices.</span></span> <span data-ttu-id="88492-127">Para obtener una lista completa de administración de dispositivos, las funcionalidades disponibles hacen referencia a [esto](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/reference.md)</span><span class="sxs-lookup"><span data-stu-id="88492-127">For a complete list of device management capabilities available refer to [this](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/reference.md)</span></span>

<span data-ttu-id="88492-128">Además, el agente de dispositivos de Azure también crea y administra los tokens de SAS para otras aplicaciones de UWP que se ejecutan en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="88492-128">In addition to this, the Azure Device Agent also creates and manages SAS tokens for other UWP applications running on the device.</span></span> <span data-ttu-id="88492-129">El agente de dispositivos de Azure puede aprovisionar otras aplicaciones UWP, como un dispositivo gemelo o como un módulo gemelo y agregar sus cadenas de conexión a los respectivos espacios TPM.</span><span class="sxs-lookup"><span data-stu-id="88492-129">The Azure Device Agent can provision other UWP apps as either a Device Twin or as a Module Twin and add their connection strings to the respective TPM slots.</span></span> <span data-ttu-id="88492-130">El aprovechamiento de la aplicación UWP el [puente de UWP](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/uwp-bridge.md) para leer su conexión de cadena de la ranura TPM y que puede usar para conectarse a IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="88492-130">The UWP app leverages the [UWP Bridge](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/uwp-bridge.md) to read their connection string from the TPM slot and can use that to connect to the IoT Hub.</span></span> 

## <a name="how-to-get-started"></a><span data-ttu-id="88492-131">¿Cómo empezar a trabajar?</span><span class="sxs-lookup"><span data-stu-id="88492-131">How to get started?</span></span>

<span data-ttu-id="88492-132">El agente de dispositivo IoT de Azure está disponible en GitHub.</span><span class="sxs-lookup"><span data-stu-id="88492-132">The Azure IoT Device Agent is available on GitHub.</span></span> <span data-ttu-id="88492-133">El proyecto también incluye ejemplos para empezar a trabajar rápidamente.</span><span class="sxs-lookup"><span data-stu-id="88492-133">The project also includes samples to get started quickly.</span></span> <span data-ttu-id="88492-134">Para obtener más información, visite nuestro GitHub [repositorio](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md)</span><span class="sxs-lookup"><span data-stu-id="88492-134">For more information, check out our GitHub [repo](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md)</span></span>

## <a name="migrating-from-azure-device-agent-v1-to-v2"></a><span data-ttu-id="88492-135">Migración de dispositivos de Azure agente V1 a V2</span><span class="sxs-lookup"><span data-stu-id="88492-135">Migrating from Azure Device Agent V1 to V2</span></span>
<span data-ttu-id="88492-136">Si actualmente utiliza la versión v1 del agente de dispositivo, un cambio importante entre V1 y V2 es que en la versión V2, el agente de dispositivos de Azure ya no comparte la conexión con una aplicación UWP.</span><span class="sxs-lookup"><span data-stu-id="88492-136">If you are currently using the v1 version of the Device Agent, one significant change between V1 and V2 is that in the V2 version, the Azure Device Agent no longer shares the connection with an UWP app.</span></span> <span data-ttu-id="88492-137">Con mejoras en el centro de IoT puede tener ahora la aplicación para UWP y el agente de dispositivos de Azure con cadenas de conexión independiente y todavía se puede asociar con el mismo dispositivo en IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="88492-137">With enhancements to the IoT Hub you can now have both the UWP app and the Azure Device Agent have independent connection strings and still be associated with the same device in IoT Hub.</span></span> <span data-ttu-id="88492-138">Consulte [aquí](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/migration-from-old-client.md) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="88492-138">Refer [here](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/migration-from-old-client.md) for more details.</span></span>

<span data-ttu-id="88492-139">Para obtener más información sobre el agente de dispositivo de Azure V1, consulte [aquí](https://docs.microsoft.com/en-us/windows/iot-core/manage-your-device/azureiotdm).</span><span class="sxs-lookup"><span data-stu-id="88492-139">For more information on the Azure Device Agent V1, refer [here](https://docs.microsoft.com/en-us/windows/iot-core/manage-your-device/azureiotdm).</span></span>

## <a name="other-useful-tools"></a><span data-ttu-id="88492-140">Otras herramientas útiles</span><span class="sxs-lookup"><span data-stu-id="88492-140">Other Useful Tools</span></span> 
### <a name="dm-mock-portal"></a><span data-ttu-id="88492-141">Portal de simulacro de DM</span><span class="sxs-lookup"><span data-stu-id="88492-141">DM Mock Portal</span></span>
<span data-ttu-id="88492-142">[Portal de simulación de DM](https://github.com/ms-iot/azure-client-tools/blob/master/docs/dm-mock-portal/dm-mock-portal.md) es una aplicación que se puede usar para establecer las propiedades de dispositivo gemelo o módulo gemelo en un dispositivo individual o a través de varios dispositivos, con capacidades de administración automática de dispositivos del centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="88492-142">[DM Mock Portal](https://github.com/ms-iot/azure-client-tools/blob/master/docs/dm-mock-portal/dm-mock-portal.md) is an application which can be used to set Device Twin or Module Twin properties on an individual device or across multiple devices, using the IoT Hub’s Automatic Device Management capabilities.</span></span> 

### <a name="tpm-tool---limpetexe"></a><span data-ttu-id="88492-143">Herramienta TPM - Limpet.exe</span><span class="sxs-lookup"><span data-stu-id="88492-143">TPM Tool - Limpet.exe</span></span>
<span data-ttu-id="88492-144">El servicio Azure Device Provisioning permite a los clientes que se asociarán automáticamente y configurar un dispositivo con una producción posterior a la instancia de IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="88492-144">The Azure Device Provisioning Service allows customers to automatically associate and configure a device with an IoT Hub post-production.</span></span> <span data-ttu-id="88492-145">Este proceso, el servicio Device Provisioning necesitará un identificador de dispositivo único y challengeable para ayudarle a configurar el dispositivo de forma segura cuando el dispositivo se coloca en la operación.</span><span class="sxs-lookup"><span data-stu-id="88492-145">For this process, Device Provisioning Service will need a unique and challengeable device ID to help configure the device securely when the device is put in operation.</span></span> <span data-ttu-id="88492-146">Servicio Device Provisioning usa la clave de aprobación pública del TPM (EKeyPub) para este propósito.</span><span class="sxs-lookup"><span data-stu-id="88492-146">Device Provisioning Service uses the TPM’s public Endorsement Key (EKeyPub) for this purpose.</span></span> <span data-ttu-id="88492-147">Para registrar el dispositivo en DPS, el EKeyPub debe ser recopiladas desde el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="88492-147">To register the device with DPS, the EKeyPub needs to be harvested from the device.</span></span> <span data-ttu-id="88492-148">Es el momento que prefiera para este paso durante la producción (durante las pruebas finales de línea del dispositivo).</span><span class="sxs-lookup"><span data-stu-id="88492-148">The preferred time for this step is during production (during end-of-line testing of the device).</span></span> <span data-ttu-id="88492-149">Sin embargo, el proceso también puede realizarse postproducción si es necesario.</span><span class="sxs-lookup"><span data-stu-id="88492-149">However, the process can also be done post-production if needed.</span></span>  

<span data-ttu-id="88492-150">Microsoft proporciona una herramienta videocámara para simplificar el proceso de registro del servicio Device Provisioning.</span><span class="sxs-lookup"><span data-stu-id="88492-150">Microsoft provides the Limpet tool to streamline the Device Provisioning Service registration process.</span></span> <span data-ttu-id="88492-151">Según la configuración de fabricación, si hay una conexión en línea, se puede registrar el dispositivo mediante videocámara directamente con el servicio Device Provisioning o videocámara puede recopilar el EKeyPub para un registro más adelante, sin conexión del dispositivo con el dispositivo Servicio de aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="88492-151">Depending on your manufacturing setup, if there is an online connection available, the device can be registered using Limpet directly with Device Provisioning Service, or Limpet can harvest the EKeyPub for a later, offline registration of the device with Device Provisioning Service.</span></span>

<span data-ttu-id="88492-152">Para obtener más detalles sobre el proceso de registro del servicio Device Provisioning con videocámara, consulte este [repositorio](https://github.com/ms-iot/azure-client-tools/blob/master/docs/limpet/limpet.md).</span><span class="sxs-lookup"><span data-stu-id="88492-152">For more details on the Device Provisioning Service registration process with Limpet, see this [repo](https://github.com/ms-iot/azure-client-tools/blob/master/docs/limpet/limpet.md).</span></span>

<span data-ttu-id="88492-153">Licencia: Videocámara con licencia bajo la licencia de código abierto de MIT.</span><span class="sxs-lookup"><span data-stu-id="88492-153">License: Limpet is licensed under the MIT open source license.</span></span> 
