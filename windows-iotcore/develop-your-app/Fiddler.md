---
title: Capturar seguimientos de Fiddler
ms.date: 08/28/2017
ms.topic: article
description: Obtenga información sobre cómo usar Fiddler para capturar seguimientos de Fiddler en Windows IoT Core.
keywords: Windows IOT, Fiddler, seguimientos, PuTTy, seguimientos de Fiddler
ms.openlocfilehash: 0539365ed4727866d816ad129cef0e904f22b1df
ms.sourcegitcommit: d84ba83c412d5c245e89880a4fca6155d98c8f52
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/25/2019
ms.locfileid: "72918254"
---
# <a name="capturing-fiddler-traces-on-windows-iot-core"></a><span data-ttu-id="394b4-104">Captura de seguimientos de Fiddler en Windows IoT Core</span><span class="sxs-lookup"><span data-stu-id="394b4-104">Capturing Fiddler Traces on Windows IoT Core</span></span>

<span data-ttu-id="394b4-105">Fiddler es una herramienta para depurar el tráfico web.</span><span class="sxs-lookup"><span data-stu-id="394b4-105">Fiddler is a tool for debugging web traffic.</span></span> <span data-ttu-id="394b4-106">Es especialmente útil porque se puede personalizar para las necesidades específicas mediante extensiones y complementos, y la herramienta proporciona una gran cantidad de información útil específica para el tráfico web.</span><span class="sxs-lookup"><span data-stu-id="394b4-106">It's particularly helpful because you can customize it for specific needs using extensions and add-ons, and the tool provides a lot of useful information specific to web traffic.</span></span>

## <a name="assumptions"></a><span data-ttu-id="394b4-107">Suposiciones</span><span class="sxs-lookup"><span data-stu-id="394b4-107">Assumptions</span></span> 

* <span data-ttu-id="394b4-108">Tiene [Putty](http://www.putty.org/) en el cuadro de desarrollador o una alternativa para ssh</span><span class="sxs-lookup"><span data-stu-id="394b4-108">You have [PuTTY](http://www.putty.org/) on your developer box or an alternative for SSH</span></span>
* <span data-ttu-id="394b4-109">Las instrucciones siguientes suponen la suposición de una máquina virtual de IoT Core, pero funcionarán en *cualquier* dispositivo de IOT Core.</span><span class="sxs-lookup"><span data-stu-id="394b4-109">The instructions below make the assumption of a IoT Core VM but will work on *any* IoT Core device</span></span>

## <a name="initial-setup"></a><span data-ttu-id="394b4-110">Configuración inicial</span><span class="sxs-lookup"><span data-stu-id="394b4-110">Initial Setup</span></span>

1. <span data-ttu-id="394b4-111">Descargue e instale la versión más reciente de [Fiddler](http://www.telerik.com/fiddler/) en el cuadro de desarrollador si todavía no lo ha hecho.</span><span class="sxs-lookup"><span data-stu-id="394b4-111">Download and install the latest version of [Fiddler](http://www.telerik.com/fiddler/) on your developer box if you haven't already</span></span>
2. <span data-ttu-id="394b4-112">Inicie Fiddler y realice las siguientes actualizaciones de configuración en _herramientas-> Telerik Fiddler Options-> pestaña https_ .</span><span class="sxs-lookup"><span data-stu-id="394b4-112">Start Fiddler and make the following setting updates under _Tools -> Telerik Fiddler Options -> HTTPS_ tab</span></span>
    * <span data-ttu-id="394b4-113">Comprobar la _captura de conexiones https_</span><span class="sxs-lookup"><span data-stu-id="394b4-113">Check _Capture HTTPS CONNECTs_</span></span>
    * <span data-ttu-id="394b4-114">Comprobar _el descifrado del tráfico https: > de todos los procesos_</span><span class="sxs-lookup"><span data-stu-id="394b4-114">Check _Decrypt HTTPS Traffic -> from all processes_</span></span>
    * <span data-ttu-id="394b4-115">Haga clic en el vínculo "certificados generados por" y seleccione el _motor Makecert_ (recomendación: reiniciar Fiddler para que este cambio surta efecto)</span><span class="sxs-lookup"><span data-stu-id="394b4-115">Click on the 'Certificates generated by' link and select _MakeCert engine_ (Recommendation: Restart Fiddler for this change to take effect)</span></span>
    * <span data-ttu-id="394b4-116">A continuación, exporte el archivo FiddlerRoot. cer a través _de Actions-> exportar el certificado raíz al escritorio_ .</span><span class="sxs-lookup"><span data-stu-id="394b4-116">Next, export the FiddlerRoot.cer file via _Actions -> Export Root Certificate To Desktop_</span></span>
3. <span data-ttu-id="394b4-117">Realice las siguientes actualizaciones de configuración en _herramientas-> opciones de Telerik Fiddler: pestaña > conexiones_ :</span><span class="sxs-lookup"><span data-stu-id="394b4-117">Make the following setting updates under _Tools -> Telerik Fiddler Options -> Connections_ tab:</span></span>
    * <span data-ttu-id="394b4-118">Configure Fiddler para que actúe como proxy del sistema; para ello, active la casilla _permitir que los equipos remotos se conecten_</span><span class="sxs-lookup"><span data-stu-id="394b4-118">Setup Fiddler to act as a system proxy by checking _Allow Remote Computers to Connect_</span></span>
    * <span data-ttu-id="394b4-119">_Fiddler escucha en el puerto_ debe establecerse en _8888_</span><span class="sxs-lookup"><span data-stu-id="394b4-119">_Fiddler listens on port_ should be set to _8888_</span></span>
  
<span data-ttu-id="394b4-120">Nota: debe reiniciar Fiddler después de este y aceptar cualquier solicitud de UAC.</span><span class="sxs-lookup"><span data-stu-id="394b4-120">Note: You should restart Fiddler after this and accept any UAC prompt.</span></span>

## <a name="transfer-and-import-fiddler-root-certificate"></a><span data-ttu-id="394b4-121">Transferencia e importación de un certificado raíz de Fiddler</span><span class="sxs-lookup"><span data-stu-id="394b4-121">Transfer and Import Fiddler Root Certificate</span></span>
<span data-ttu-id="394b4-122">Debe importar el certificado raíz de Fiddler en la imagen o el dispositivo de IoT para depurar el enrutamiento de tráfico HTTPS a través de su equipo.</span><span class="sxs-lookup"><span data-stu-id="394b4-122">You'll need to import the Fiddler root certificate to your IoT image or device in order to debug https traffic routing through your PC.</span></span>  <span data-ttu-id="394b4-123">Para ello:</span><span class="sxs-lookup"><span data-stu-id="394b4-123">To do this:</span></span>

1. <span data-ttu-id="394b4-124">Monte el archivo VHD (haga clic con el botón derecho en el disco duro virtual y elija _montar_) o conéctese a su dispositivo de IOT mediante Putty (o cliente SSH alternativo).</span><span class="sxs-lookup"><span data-stu-id="394b4-124">Mount the VHD file (right click on the VHD and choose _mount_) or connect to your IoT device via PuTTY (or alternative SSH client)</span></span>
2. <span data-ttu-id="394b4-125">Vaya a la partición principal de y cree una carpeta de _prueba_ en la raíz (a través de SSH, use _MD c:\test_).</span><span class="sxs-lookup"><span data-stu-id="394b4-125">Browse to the mainOS partition and create a _test_ folder at root (via SSH, use _md c:\test_)</span></span>
3. <span data-ttu-id="394b4-126">Copie FiddlerRoot. cer que generó anteriormente (debe estar en el escritorio de forma predeterminada) en la ubicación de la carpeta de prueba.</span><span class="sxs-lookup"><span data-stu-id="394b4-126">Copy FiddlerRoot.cer you generated above (should be on your desktop by default) to the test folder location</span></span>
4. <span data-ttu-id="394b4-127">Si usa un disco duro virtual, desmonte los discos montados y, a continuación, inicie la máquina virtual de IoT Core a través de HyperV.</span><span class="sxs-lookup"><span data-stu-id="394b4-127">If using a VHD, unmount it by ejecting any of the mounted drives and then start the IoT Core VM via HyperV</span></span>
5. <span data-ttu-id="394b4-128">Inicio de una [sesión de ssh](../connect-your-device/ssh.md) e inicio de sesión como administrador</span><span class="sxs-lookup"><span data-stu-id="394b4-128">Start an [SSH session](../connect-your-device/ssh.md) and login as administrator</span></span> 
6. <span data-ttu-id="394b4-129">Navegue al directorio c:\test en la sesión de SSH.</span><span class="sxs-lookup"><span data-stu-id="394b4-129">Navigate to c:\test directory in your SSH session</span></span>
7. <span data-ttu-id="394b4-130">Importar certificado raíz de Fiddler mediante el comando:</span><span class="sxs-lookup"><span data-stu-id="394b4-130">Import Fiddler Root Certificate via command:</span></span>
    * `certmgr -add FiddlerRoot.cer -r localmachine -s root`
8. <span data-ttu-id="394b4-131">Cerrar sesión SSH</span><span class="sxs-lookup"><span data-stu-id="394b4-131">Close SSH session</span></span>


## <a name="setup-proxy-on-vm-or-iot-core-device"></a><span data-ttu-id="394b4-132">Configuración del proxy en la máquina virtual o en un dispositivo de IoT Core</span><span class="sxs-lookup"><span data-stu-id="394b4-132">Setup Proxy on VM or IoT Core Device</span></span>
<span data-ttu-id="394b4-133">Los pasos siguientes permitirán que la máquina virtual o el dispositivo de IoT enruten el tráfico a través de su equipo para que Fiddler pueda capturar el tráfico de red para el análisis:</span><span class="sxs-lookup"><span data-stu-id="394b4-133">The steps below will allow your IoT VM or device to route traffic through your PC so that Fiddler can capture network traffic for analysis:</span></span>

1. <span data-ttu-id="394b4-134">Determinar la dirección IP de la máquina de desarrollo mediante una consola CMD mediante _ipconfig_</span><span class="sxs-lookup"><span data-stu-id="394b4-134">Determine the IP of your development machine using a CMD console via _ipconfig_</span></span>
2. <span data-ttu-id="394b4-135">Inicie una nueva sesión de SSH y esta vez, inicie sesión como defaultUser (nombredeusuario: _DefaultAccount_ PWD: _[Blank]_ )</span><span class="sxs-lookup"><span data-stu-id="394b4-135">Start a new SSH session and this time, login as defaultUser (Username: _DefaultAccount_  Pwd: _[blank]_ )</span></span>
3. <span data-ttu-id="394b4-136">Establezca el proxy mediante los siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="394b4-136">Set the proxy via the following commands:</span></span>
    * `reg add "hkcu\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyEnable /t REG_DWORD /d 1`
    * `reg add "hkcu\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyServer /t REG_SZ /d [PC IP address]:8888`

<span data-ttu-id="394b4-137">Si aún no se está ejecutando, inicie Fiddler en el equipo, reinicie la máquina virtual o el dispositivo de IoT Core y el tráfico ahora debe enrutarse a través de Fiddler.</span><span class="sxs-lookup"><span data-stu-id="394b4-137">If not already running, start Fiddler on your PC, restart your VM or IoT Core device and traffic should now be routed through Fiddler.</span></span> 

<span data-ttu-id="394b4-138">Nota: Si ve https CONNECT en Fiddler pero no tiene datos, es probable que el certificado no se haya instalado correctamente.</span><span class="sxs-lookup"><span data-stu-id="394b4-138">Note: If you see https CONNECT in Fiddler but no data, the certificate was likely not installed correctly.</span></span> <span data-ttu-id="394b4-139">Asegúrese de que no perdió los pasos de la _transferencia e importación del certificado raíz de Fiddler_ anterior.</span><span class="sxs-lookup"><span data-stu-id="394b4-139">Make sure you didn't miss the _Transfer and Import Fiddler Root Certificate_ steps above.</span></span>

<span data-ttu-id="394b4-140">Adicionalmente, si desea volver a desactivar el proxy, tenga en cuenta que las claves de registro anteriores se almacenan en caché en un BLOB binario en otra clave.</span><span class="sxs-lookup"><span data-stu-id="394b4-140">Additonally, if you wish to turn the proxy back off note that the above reg keys get cached in a binary blob in another key.</span></span> <span data-ttu-id="394b4-141">por lo tanto, además de quitar las claves que se acaban de agregar en el paso 3 anterior, también debe hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="394b4-141">so, in addition to removing the keys just added in step 3 above you also need to do:</span></span>

    reg delete "hkcu\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections"
    
    
