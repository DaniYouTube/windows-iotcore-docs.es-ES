---
title: Habilitación del arranque seguro, BitLocker y Device Guard en Windows 10 IoT Core
ms.date: 08/28/2017
ms.topic: article
description: Obtenga información sobre cómo habilitar el arranque seguro, BitLocker y Device Guard en Windows 10 IoT Core
keywords: Windows IOT, arranque seguro, BitLocker, Device Guard, seguridad, seguridad llave en mano
ms.openlocfilehash: 00e2abf82a043dfebe956281995961692b45c3b9
ms.sourcegitcommit: d84ba83c412d5c245e89880a4fca6155d98c8f52
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/25/2019
ms.locfileid: "72918539"
---
# <a name="enabling-secure-boot-bitlocker-and-device-guard-on-windows-10-iot-core"></a><span data-ttu-id="a0150-104">Habilitación del arranque seguro, BitLocker y Device Guard en Windows 10 IoT Core</span><span class="sxs-lookup"><span data-stu-id="a0150-104">Enabling Secure Boot, BitLocker, and Device Guard on Windows 10 IoT Core</span></span>

<span data-ttu-id="a0150-105">Windows 10 IoT Core incluye ofertas de características de seguridad como UEFI Secure boot, cifrado de dispositivos de BitLocker y Device Guard.</span><span class="sxs-lookup"><span data-stu-id="a0150-105">Windows 10 IoT Core includes security feature offerings such as UEFI Secure Boot, BitLocker Device Encryption and Device Guard.</span></span>  <span data-ttu-id="a0150-106">Estos ayudarán a los creadores de dispositivos en la creación de dispositivos IoT de Windows completamente bloqueados que son resistentes a muchos tipos diferentes de ataques.</span><span class="sxs-lookup"><span data-stu-id="a0150-106">These will assist device builders in creating fully locked down Windows IoT devices that are resilient to many different types of attacks.</span></span>  <span data-ttu-id="a0150-107">Juntas, estas características proporcionan una protección óptima que garantiza que una plataforma se iniciará de una manera definida, al tiempo que se bloquean los binarios desconocidos y se protegen los datos de usuario mediante el cifrado del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a0150-107">Together, these features provide the optimal protection that ensures that a platform will launch in a defined way, while locking out unknown binaries and protecting user data through the use of device encryption.</span></span>

## <a name="boot-order"></a><span data-ttu-id="a0150-108">Orden de arranque</span><span class="sxs-lookup"><span data-stu-id="a0150-108">Boot Order</span></span>

<span data-ttu-id="a0150-109">Se necesita una comprensión del orden de arranque en un dispositivo de Windows 10 IoT Core antes de que podamos profundizar en los componentes individuales que proporcionan una plataforma segura para el dispositivo de IoT.</span><span class="sxs-lookup"><span data-stu-id="a0150-109">An understanding of the boot order on a Windows 10 IoT Core device is needed before we can delve into the individual components that provide a secure platform for the IoT device.</span></span>

<span data-ttu-id="a0150-110">Hay tres áreas principales que se producen desde el momento en que se enciende un dispositivo IoT, pasando por la carga y la ejecución del kernel de sistema operativo de la aplicación instalada.</span><span class="sxs-lookup"><span data-stu-id="a0150-110">There are three main areas that occur from when an IoT device is powered on, all the way through to the OS kernel loading and execution of installed application.</span></span>

* <span data-ttu-id="a0150-111">Arranque seguro de plataforma</span><span class="sxs-lookup"><span data-stu-id="a0150-111">Platform Secure Boot</span></span>
* <span data-ttu-id="a0150-112">Arranque seguro de Unified Extensible Firmware Interface (UEFI)</span><span class="sxs-lookup"><span data-stu-id="a0150-112">Unified Extensible Firmware Interface (UEFI) Secure Boot</span></span>
* <span data-ttu-id="a0150-113">Integridad de código de Windows</span><span class="sxs-lookup"><span data-stu-id="a0150-113">Windows Code Integrity</span></span>

![Orden de arranque](../media/SecureBootAndBitLocker/BootOrder.jpg)

<span data-ttu-id="a0150-115">[Aquí](https://docs.microsoft.com/windows/security/information-protection/secure-the-windows-10-boot-process)encontrará información adicional sobre el proceso de arranque de Windows 10.</span><span class="sxs-lookup"><span data-stu-id="a0150-115">Additional information on the Windows 10 boot process can be found [here](https://docs.microsoft.com/windows/security/information-protection/secure-the-windows-10-boot-process).</span></span>

## <a name="locking-down-iot-devices"></a><span data-ttu-id="a0150-116">Bloqueo de dispositivos IoT</span><span class="sxs-lookup"><span data-stu-id="a0150-116">Locking-down IoT Devices</span></span>

<span data-ttu-id="a0150-117">Para bloquear un dispositivo de Windows IoT, deben tenerse en cuenta las consideraciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="a0150-117">In order to lockdown a Windows IoT device, the following considerations must be made.</span></span>

### <a name="platform-secure-boot"></a><span data-ttu-id="a0150-118">Arranque seguro de plataforma</span><span class="sxs-lookup"><span data-stu-id="a0150-118">Platform Secure Boot</span></span>

<span data-ttu-id="a0150-119">Cuando el dispositivo se enciende por primera vez, el primer paso en el proceso de arranque total consiste en cargar y ejecutar los cargadores de arranque de firmware, que inicializan el hardware en los dispositivos y proporcionan funcionalidad intermitente de emergencia.</span><span class="sxs-lookup"><span data-stu-id="a0150-119">When the device is first powered on, the first step in the overall boot process is to load and run firmware boot loaders, which initialize the hardware on the devies and provide emergency flashing functionality.</span></span> <span data-ttu-id="a0150-120">A continuación, se carga el entorno UEFI y se entrega el control.</span><span class="sxs-lookup"><span data-stu-id="a0150-120">The UEFI environment is then loaded and control is handed over.</span></span>

<span data-ttu-id="a0150-121">Estos cargadores de arranque de firmware son específicos del SoC, por lo que tendrá que trabajar con el fabricante del dispositivo adecuado para crear estos cargadores de arranque en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a0150-121">These firmware boot loaders are SoC-specific, so you will need to work with the appropriate device manufacturer to have these boot loaders created on the device.</span></span>

### <a name="uefi-secure-boot"></a><span data-ttu-id="a0150-122">Arranque seguro de la UEFI</span><span class="sxs-lookup"><span data-stu-id="a0150-122">UEFI Secure Boot</span></span>

<span data-ttu-id="a0150-123">El arranque seguro UEFI es el primer punto de cumplimiento de directiva y se encuentra en UEFI.</span><span class="sxs-lookup"><span data-stu-id="a0150-123">UEFI Secure Boot is the first policy enforcement point, and is located in UEFI.</span></span>  <span data-ttu-id="a0150-124">Restringe el sistema para permitir solo la ejecución de archivos binarios firmados por una entidad de certificación especificada, como controladores de firmware, opciones de ROM, controladores UEFI o aplicaciones y cargadores de arranque UEFI.</span><span class="sxs-lookup"><span data-stu-id="a0150-124">It restricts the system to only allow execution of binaries signed by a specified authority, such as firmware drivers, option ROMs, UEFI drivers or applications, and UEFI boot loaders.</span></span> <span data-ttu-id="a0150-125">Esta característica evita que el código desconocido se ejecute en la plataforma y pueda debilitar la posición de seguridad del mismo.</span><span class="sxs-lookup"><span data-stu-id="a0150-125">This feature prevents unknown code from being executed on the platform and potentially weakening the security posture of it.</span></span> <span data-ttu-id="a0150-126">El arranque seguro reduce el riesgo de ataques de malware de prearranque al dispositivo, como rootkits.</span><span class="sxs-lookup"><span data-stu-id="a0150-126">Secure Boot reduces the risk of pre-boot malware attacks to the device, such as rootkits.</span></span> 

<span data-ttu-id="a0150-127">Como OEM, debe almacenar las bases de datos de arranque seguro de UEFI en el dispositivo IoT en el momento de la fabricación.</span><span class="sxs-lookup"><span data-stu-id="a0150-127">As the OEM, you need to store the UEFI Secure Boot databases on the IoT device at manufacture time.</span></span> <span data-ttu-id="a0150-128">Estas bases de datos incluyen la base de datos de firmas (dB), la base de datos de firma revocada (dbx) y la base de datos de claves de inscripción de claves (KEK).</span><span class="sxs-lookup"><span data-stu-id="a0150-128">These databases include the Signature database (db), Revoked Signature database (dbx), and the Key Enrollment Key database (KEK).</span></span> <span data-ttu-id="a0150-129">Estas bases de datos se almacenan en la RAM no volátil de firmware (NV-RAM) del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a0150-129">These databases are stored on the firmware nonvolatile RAM (NV-RAM) of the device.</span></span>

* <span data-ttu-id="a0150-130">**Base de datos de firmas (BD):** Aquí se enumeran los firmantes o los hash de imagen de los cargadores de sistema operativo, las aplicaciones UEFI y los controladores UEFI que se pueden cargar en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a0150-130">**Signature Database (db):** This lists the signers or image hashes of operating system loaders, UEFI applications and UEFI drivers that are allowed to be loaded on the device</span></span>

* <span data-ttu-id="a0150-131">**Base de datos de firma revocada (dbx):** Aquí se enumeran los firmantes o los hash de imagen de los cargadores de sistema operativo, las aplicaciones UEFI y los controladores UEFI que ya no son de confianza y *no* se les permite que se carguen en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a0150-131">**Revoked Signature Database (dbx):** This lists the signers or image hashes of operating system loaders, UEFI applications and UEFI drivers that are no longer trusted, and are *NOT* allowed to be loaded on the device</span></span> 

* <span data-ttu-id="a0150-132">**Base de datos de clave de inscripción de claves (KEK):** Contiene una lista de claves de firma que se pueden utilizar para actualizar la firma y las bases de datos de firma revocadas.</span><span class="sxs-lookup"><span data-stu-id="a0150-132">**Key Enrollment Key database (KEK):** Contains a list of signing keys that can be used to update the signature and revoked signature databases.</span></span>

<span data-ttu-id="a0150-133">Una vez que estas bases de datos se crean y se agregan al dispositivo, el OEM bloquea el firmware de la edición y genera una clave de firma de plataforma (PK).</span><span class="sxs-lookup"><span data-stu-id="a0150-133">Once these databases are created and added to the device, the OEM locks the firmware from editing, and generates a platform signing key (PK).</span></span> <span data-ttu-id="a0150-134">Esta clave se puede usar para firmar actualizaciones en KEK o para deshabilitar el arranque seguro UEFI.</span><span class="sxs-lookup"><span data-stu-id="a0150-134">This key can be used to sign updates to the KEK or to disable UEFI Secure Boot.</span></span>

<span data-ttu-id="a0150-135">Estos son los pasos que realiza el arranque seguro de UEFI:</span><span class="sxs-lookup"><span data-stu-id="a0150-135">Here are the steps taken by UEFI Secure Boot:</span></span>

1. <span data-ttu-id="a0150-136">Una vez encendido el dispositivo, las bases de datos de firmas se comprueban con la clave de firma de plataforma (PK).</span><span class="sxs-lookup"><span data-stu-id="a0150-136">After the device is powered on, the signature databases are each checked against the platform signing key (PK).</span></span>
2. <span data-ttu-id="a0150-137">Si el firmware no es de confianza, el firmware UEFI inicia la recuperación específica del OEM para restaurar el firmware de confianza.</span><span class="sxs-lookup"><span data-stu-id="a0150-137">If the firmware isn't trusted, UEFI firmware initiates OEM-specific recovery to restore trusted firmware.</span></span>
3. <span data-ttu-id="a0150-138">Si no se puede cargar el administrador de arranque de Windows, el firmware intentará arrancar una copia de seguridad del administrador de arranque de Windows.</span><span class="sxs-lookup"><span data-stu-id="a0150-138">If Windows Boot Manager cannot be loaded, the firmware will attempt to boot a backup copy of Windows Boot Manager.</span></span> <span data-ttu-id="a0150-139">Si también se produce un error, el firmware UEFI inicia la corrección específica del OEM.</span><span class="sxs-lookup"><span data-stu-id="a0150-139">If this also fails, the UEFI firmware initiates OEM-specific remediation.</span></span>
4. <span data-ttu-id="a0150-140">El administrador de arranque de Windows ejecuta y comprueba la firma digital del kernel de Windows.</span><span class="sxs-lookup"><span data-stu-id="a0150-140">Windows Boot Manager runs and verifies the digital signature of the Windows Kernel.</span></span> <span data-ttu-id="a0150-141">Si es de confianza, el administrador de arranque de Windows pasa el control al kernel de Windows.</span><span class="sxs-lookup"><span data-stu-id="a0150-141">If trusted, Windows Boot Manager passes control to the Windows Kernel.</span></span>

<span data-ttu-id="a0150-142">[Aquí](https://technet.microsoft.com/library/dn747883.aspx)encontrará más detalles sobre el arranque seguro, junto con la guía de creación y administración de claves.</span><span class="sxs-lookup"><span data-stu-id="a0150-142">Additional details on Secure Boot, along with key creation and management guidance, is available [here](https://technet.microsoft.com/library/dn747883.aspx).</span></span>

### <a name="windows-code-integrity"></a><span data-ttu-id="a0150-143">Integridad de código de Windows</span><span class="sxs-lookup"><span data-stu-id="a0150-143">Windows Code Integrity</span></span>

<span data-ttu-id="a0150-144">La integridad de código de Windows (WCI) mejora la seguridad del sistema operativo al validar la integridad de un controlador o una aplicación cada vez que se carga en la memoria.</span><span class="sxs-lookup"><span data-stu-id="a0150-144">Windows Code Integrity (WCI) improves the security of the operating system by validating the integrity of a driver or application each time it is loaded into memory.</span></span> <span data-ttu-id="a0150-145">CI contiene dos componentes principales: integridad de código en modo kernel (KMCI) e integridad de código de modo de usuario (UMCI).</span><span class="sxs-lookup"><span data-stu-id="a0150-145">CI contains two main components - Kernel Mode Code Integrity (KMCI) and User Mode Code Integrity (UMCI).</span></span>

<span data-ttu-id="a0150-146">La integridad de código configurable (CCI) es una característica de Windows 10 que permite a los creadores de dispositivos bloquear un dispositivo y permitirle ejecutar y ejecutar código firmado y de confianza.</span><span class="sxs-lookup"><span data-stu-id="a0150-146">Configurable Code Integrity (CCI) is a feature in Windows 10 that allows device builders to lockdown a device and only allow it to run and execute code that is signed and trusted.</span></span>  <span data-ttu-id="a0150-147">Para ello, los generadores de dispositivos pueden crear una directiva de integridad de código en un dispositivo "Golden" (versión de lanzamiento final de hardware y software) y, a continuación, proteger y aplicar esta directiva en todos los dispositivos de la fábrica.</span><span class="sxs-lookup"><span data-stu-id="a0150-147">To do so, device builders can create a code integrity policy on a 'golden' device (final release version of hardware and software) and then secure and apply this policy on all devices on the factory floor.</span></span>

<span data-ttu-id="a0150-148">Para obtener más información sobre la implementación de directivas de integridad de código, auditorías y cumplimiento, consulte la documentación de TechNet más reciente [aquí](https://technet.microsoft.com/itpro/windows/keep-secure/deploy-code-integrity-policies-steps).</span><span class="sxs-lookup"><span data-stu-id="a0150-148">To learn more about deploying code integrity policies, auditing and enforcement, check out the latest technet documentation [here](https://technet.microsoft.com/itpro/windows/keep-secure/deploy-code-integrity-policies-steps).</span></span>

<span data-ttu-id="a0150-149">Estos son los pasos que realiza la integridad de código de Windows:</span><span class="sxs-lookup"><span data-stu-id="a0150-149">Here are the steps taken by Windows Code Integrity:</span></span>

1. <span data-ttu-id="a0150-150">El kernel de Windows comprobará todos los demás componentes en la base de datos de firmas antes de cargarlos.</span><span class="sxs-lookup"><span data-stu-id="a0150-150">Windows Kernel will verify all other components against the signature database before loading.</span></span> <span data-ttu-id="a0150-151">Esto incluye los controladores, los archivos de inicio y ELAM (antimalware de inicio temprano).</span><span class="sxs-lookup"><span data-stu-id="a0150-151">This includes drivers, startup files and ELAM (Early Launch Anti-Malware).</span></span>
2. <span data-ttu-id="a0150-152">El kernel de Windows cargará los componentes de confianza en el proceso de inicio y prohibirá la carga de los componentes que no son de confianza.</span><span class="sxs-lookup"><span data-stu-id="a0150-152">Windows Kernel will load the trusted components in the startup process, and prohibit loading of the untrusted components.</span></span>
3. <span data-ttu-id="a0150-153">Cargas del sistema operativo Windows 10 IoT Core, junto con las aplicaciones instaladas.</span><span class="sxs-lookup"><span data-stu-id="a0150-153">Windows 10 IoT Core operating system loads, along with any installed applications.</span></span>

### <a name="bitlocker-device-encryption"></a><span data-ttu-id="a0150-154">Cifrado de dispositivo de BitLocker</span><span class="sxs-lookup"><span data-stu-id="a0150-154">BitLocker Device Encryption</span></span>

<span data-ttu-id="a0150-155">Windows 10 IoT Core también implementa una versión ligera del cifrado de dispositivos de BitLocker, protegiendo los dispositivos IoT contra ataques sin conexión.</span><span class="sxs-lookup"><span data-stu-id="a0150-155">Windows 10 IoT Core also implements a lightweight version of BitLocker Device Encryption, protecting IoT devices against offline attacks.</span></span> <span data-ttu-id="a0150-156">Esta funcionalidad tiene una dependencia fuerte en la presencia de un TPM en la plataforma, incluido el protocolo anterior al sistema operativo necesario en UEFI que realiza las medidas necesarias.</span><span class="sxs-lookup"><span data-stu-id="a0150-156">This capability has a strong dependency on the presence of a TPM on the platform, including the necessary pre-OS protocol in UEFI that conducts the necessary measurements.</span></span> <span data-ttu-id="a0150-157">Estas medidas previas al sistema operativo garantizan que el sistema operativo más adelante tenga un registro definitivo de cómo se inició el sistema operativo; sin embargo, no aplica ninguna restricción de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a0150-157">These pre-OS measurements ensure that the OS later has a definitive record of how the OS was launched; however, it does not enforce any execution restrictions.</span></span>

> [!TIP]
> <span data-ttu-id="a0150-158">La funcionalidad de BitLocker en Windows 10 IoT Core permite el cifrado automático del volumen del sistema operativo basado en NTFS mientras enlaza todos los volúmenes de datos NTFS disponibles a él.</span><span class="sxs-lookup"><span data-stu-id="a0150-158">BitLocker functionality on Windows 10 IoT Core allows for automatic encryption of NTFS-based OS volume while binding all available NTFS data volumes to it.</span></span> <span data-ttu-id="a0150-159">Para ello, es necesario asegurarse de que el GUID del volumen EFIESP se establece en _C12A7328-F81F-11D2-BA4B-00A0C93EC93B_.</span><span class="sxs-lookup"><span data-stu-id="a0150-159">For this, it’s necessary to ensure that the EFIESP volume GUID is set to _C12A7328-F81F-11D2-BA4B-00A0C93EC93B_.</span></span>

### <a name="device-guard-on-windows-iot-core"></a><span data-ttu-id="a0150-160">Device Guard en Windows IoT Core</span><span class="sxs-lookup"><span data-stu-id="a0150-160">Device Guard on Windows IoT Core</span></span>

<span data-ttu-id="a0150-161">La mayoría de los dispositivos IoT se compilan como dispositivos de funciones fijas.</span><span class="sxs-lookup"><span data-stu-id="a0150-161">Most IoT devices are built as fixed-function devices.</span></span> <span data-ttu-id="a0150-162">Esto implica que los generadores de dispositivos saben exactamente qué firmware, sistema operativo, controladores y aplicaciones deben ejecutarse en un dispositivo determinado.</span><span class="sxs-lookup"><span data-stu-id="a0150-162">This implies that device builders know exactly which firmware, operating system, drivers and applications should be running on a given device.</span></span> <span data-ttu-id="a0150-163">A su vez, esta información se puede usar para el bloqueo completo de un dispositivo IoT, ya que solo se permite la ejecución de código conocido y de confianza.</span><span class="sxs-lookup"><span data-stu-id="a0150-163">In turn, this information can be used to fully lockdown an IoT device by only allowing execution of known and trusted code.</span></span> <span data-ttu-id="a0150-164">Device Guard en Windows 10 IoT Core puede ayudar a proteger los dispositivos IoT asegurándose de que no se pueda ejecutar código ejecutable desconocido o que no sea de confianza en dispositivos bloqueados.</span><span class="sxs-lookup"><span data-stu-id="a0150-164">Device Guard on Windows 10 IoT Core can help protect IoT devices by ensuring that unknown or untrusted executable code cannot be run on locked-down devices.</span></span>


## <a name="turnkey-security-on-iot-core"></a><span data-ttu-id="a0150-165">Seguridad llave en mano en IoT Core</span><span class="sxs-lookup"><span data-stu-id="a0150-165">Turnkey Security on IoT Core</span></span>

<span data-ttu-id="a0150-166">Para facilitar la habilitación de las principales características de seguridad en los dispositivos IoT Core, Microsoft proporciona un [paquete de seguridad Llave]( https://github.com/ms-iot/security/tree/master/TurnkeySecurity) en mano que permite a los creadores de dispositivos compilar dispositivos IOT totalmente bloqueados.</span><span class="sxs-lookup"><span data-stu-id="a0150-166">To facilitate easy enablement of key security features on IoT Core devices, Microsoft is providing a [Turnkey Security Package]( https://github.com/ms-iot/security/tree/master/TurnkeySecurity) that allows device builders to build fully locked down IoT devices.</span></span> <span data-ttu-id="a0150-167">Este paquete le ayudará con:</span><span class="sxs-lookup"><span data-stu-id="a0150-167">This package will help with:</span></span>

* <span data-ttu-id="a0150-168">Aprovisionamiento de claves de arranque seguras y habilitación de la característica en plataformas de IoT compatibles</span><span class="sxs-lookup"><span data-stu-id="a0150-168">Provisioning Secure Boot keys and enabling the feature on supported IoT platforms</span></span>
* <span data-ttu-id="a0150-169">Instalación y configuración del cifrado de dispositivos con BitLocker</span><span class="sxs-lookup"><span data-stu-id="a0150-169">Setup and configuration of device encryption using BitLocker</span></span>
* <span data-ttu-id="a0150-170">Iniciar el bloqueo de dispositivo para permitir solo la ejecución de aplicaciones y controladores firmados</span><span class="sxs-lookup"><span data-stu-id="a0150-170">Initiating device lockdown to only allow execution of signed applications and drivers</span></span>

<span data-ttu-id="a0150-171">En los pasos siguientes se llevará a cabo el proceso de creación de una imagen de bloqueo mediante el [paquete de seguridad Llave]( https://github.com/ms-iot/security/tree/master/TurnkeySecurity) en mano.</span><span class="sxs-lookup"><span data-stu-id="a0150-171">The following steps will lead through the process to create a lockdown image using the [Turnkey Security Package]( https://github.com/ms-iot/security/tree/master/TurnkeySecurity)</span></span>

![Crear imagen de bloqueo](../media/SecurityFlowAndCertificates/ImageLockDown.png)

### <a name="prerequisites"></a><span data-ttu-id="a0150-173">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="a0150-173">Prerequisites</span></span>

* <span data-ttu-id="a0150-174">Un equipo que ejecuta Windows 10 Enterprise (los scripts proporcionados **no** admiten otras versiones de Windows)</span><span class="sxs-lookup"><span data-stu-id="a0150-174">A PC running Windows 10 Enterprise (other Windows versions are **not** supported by the provided scripts)</span></span> 
* <span data-ttu-id="a0150-175">[SDK de Windows 10](https://developer.microsoft.com/en-US/windows/downloads/windows-10-sdk) : necesario para la generación de certificados</span><span class="sxs-lookup"><span data-stu-id="a0150-175">[Windows 10 SDK](https://developer.microsoft.com/en-US/windows/downloads/windows-10-sdk) - Required for Certificate Generation</span></span>
* <span data-ttu-id="a0150-176">[Windows 10 ADK](https://developer.microsoft.com/en-us/windows/hardware/windows-assessment-deployment-kit) : necesario para la generación de CAB</span><span class="sxs-lookup"><span data-stu-id="a0150-176">[Windows 10 ADK](https://developer.microsoft.com/en-us/windows/hardware/windows-assessment-deployment-kit) - Required for CAB generation</span></span>
* <span data-ttu-id="a0150-177">Plataforma de referencia: se necesitará hardware de versión con firmware de envío, sistema operativo, controladores y aplicaciones para el bloqueo final.</span><span class="sxs-lookup"><span data-stu-id="a0150-177">Reference platform - release hardware with shipping firmware, OS, drivers and applications will be required for final lockdown</span></span>

### <a name="development-iot-devices"></a><span data-ttu-id="a0150-178">Desarrollo de dispositivos IoT</span><span class="sxs-lookup"><span data-stu-id="a0150-178">Development IoT Devices</span></span>

<span data-ttu-id="a0150-179">Windows 10 IoT Core funciona con varios silicios que se usan en cientos de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="a0150-179">Windows 10 IoT Core works with various silicons that are utilized in hundreds of devices.</span></span> <span data-ttu-id="a0150-180">De los [dispositivos de desarrollo de IOT sugeridos](../learn-about-hardware/SoCsAndCustomBoards.md), los siguientes proporcionan funcionalidad TPM de firmware, junto con el arranque seguro, el arranque medido, las funcionalidades de BitLocker y Device Guard:</span><span class="sxs-lookup"><span data-stu-id="a0150-180">Of the [suggested IoT development devices](../learn-about-hardware/SoCsAndCustomBoards.md), the following provide firmware TPM functionality out of the box, along with Secure Boot, Measured Boot, BitLocker and Device Guard capabilities:</span></span>

* <span data-ttu-id="a0150-181">Qualcomm DragonBoard 410C</span><span class="sxs-lookup"><span data-stu-id="a0150-181">Qualcomm DragonBoard 410c</span></span>

    <span data-ttu-id="a0150-182">Para habilitar el arranque seguro, puede que sea necesario aprovisionar RPMB.</span><span class="sxs-lookup"><span data-stu-id="a0150-182">In order to enable Secure Boot, it may be necessary to provision RPMB.</span></span> <span data-ttu-id="a0150-183">Una vez que el eMMC se ha deshabilitado con Windows 10 IoT Core (según las instrucciones que se indican [aquí](https://docs.microsoft.com/windows/iot-core/tutorials/quickstarter/devicesetup#using-the-iot-dashboard-dragonboard-410c), presione [POWER] + [VOL +] + [VOL-] simultáneamente en el dispositivo cuando se enciende y seleccione "aprovisionar RPMB" en el menú BDS.</span><span class="sxs-lookup"><span data-stu-id="a0150-183">Once the eMMC has been flashed with Windows 10 IoT Core (as per instructions [here](https://docs.microsoft.com/windows/iot-core/tutorials/quickstarter/devicesetup#using-the-iot-dashboard-dragonboard-410c), press [Power] + [Vol+] + [Vol-] simultaneously on the device when powering up and select "Provision RPMB" from the BDS menu.</span></span> <span data-ttu-id="a0150-184">*Tenga en cuenta que se trata de un paso irreversible.*</span><span class="sxs-lookup"><span data-stu-id="a0150-184">*Please note that this is an irreversible step.*</span></span>

* <span data-ttu-id="a0150-185">Intel MinnowBoardMax</span><span class="sxs-lookup"><span data-stu-id="a0150-185">Intel MinnowBoardMax</span></span>

    <span data-ttu-id="a0150-186">En el caso de MinnowBoard Max, la versión de firmware debe ser 0,82 o superior (obtener el [firmware más reciente](https://firmware.intel.com/projects/minnowboard-max)).</span><span class="sxs-lookup"><span data-stu-id="a0150-186">For Intel's MinnowBoard Max, firmware version must be 0.82 or higher (get the [latest firmware](https://firmware.intel.com/projects/minnowboard-max)).</span></span> <span data-ttu-id="a0150-187">Para habilitar las capacidades de TPM, encienda el panel con un teclado & Mostrar adjunta y presione F2 para especificar la configuración de UEFI.</span><span class="sxs-lookup"><span data-stu-id="a0150-187">To enable TPM capabilities, power up board with a keyboard & display attached and press F2 to enter UEFI setup.</span></span> <span data-ttu-id="a0150-188">Vaya a _Device Manager-> configuración del sistema-> configuración de seguridad-> PTT_ y establézcalo en _&lt;habilitar&gt;_ .</span><span class="sxs-lookup"><span data-stu-id="a0150-188">Go to _Device Manager -> System Setup -> Security Configuration -> PTT_ and set it to _&lt;Enable&gt;_.</span></span> <span data-ttu-id="a0150-189">Presione F10 para guardar los cambios y continuar con un reinicio de la plataforma.</span><span class="sxs-lookup"><span data-stu-id="a0150-189">Press F10 to save changes and proceed with a reboot of the platform.</span></span>

> [!NOTE]
> <span data-ttu-id="a0150-190">Raspberry pi 2 y 3 no admiten TPM y, por tanto, no se pueden configurar escenarios de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="a0150-190">Raspberry Pi 2 nor 3 do not support TPM and so we cannot configure Lockdown scenarios.</span></span>

### <a name="generate-lockdown-packages"></a><span data-ttu-id="a0150-191">Generar paquetes de bloqueo</span><span class="sxs-lookup"><span data-stu-id="a0150-191">Generate Lockdown Packages</span></span>

1. <span data-ttu-id="a0150-192">Descargue el paquete de [scripts de DeviceLockDown](https://github.com/ms-iot/security/tree/master/TurnkeySecurity) , que contiene todas las herramientas y los scripts adicionales necesarios para configurar y bloquear dispositivos.</span><span class="sxs-lookup"><span data-stu-id="a0150-192">Download the [DeviceLockDown Script](https://github.com/ms-iot/security/tree/master/TurnkeySecurity) package, which contains all of the additional tools and scripts required for configuring and locking down devices</span></span>
2. <span data-ttu-id="a0150-193">Inicie una consola de administración de PowerShell (PS) en el equipo con Windows 10 y navegue hasta la ubicación del script descargado.</span><span class="sxs-lookup"><span data-stu-id="a0150-193">Start an Administrative PowerShell (PS) console on your Windows 10 PC and navigate to the location of the downloaded script.</span></span>
3. <span data-ttu-id="a0150-194">Monte la plataforma de hardware de referencia (que ejecuta la imagen desbloqueada) en el equipo a través de un recurso compartido de red con</span><span class="sxs-lookup"><span data-stu-id="a0150-194">Mount your reference hardware platform (running the unlocked image) to your PC via network share using</span></span>

    ```powershell
    net use \\a.b.c.d\c$ /user:username password
    ```

4. <span data-ttu-id="a0150-195">Generar claves para el dispositivo mediante</span><span class="sxs-lookup"><span data-stu-id="a0150-195">Generate keys for your device using</span></span>

    ```powershell
    .\GenerateKeys.ps1 -OemName '<your oem name>' -outputPath '<output directory>'
    ```

    * <span data-ttu-id="a0150-196">Las claves y los certificados se generan en la carpeta de salida especificada con el sufijo adecuado.</span><span class="sxs-lookup"><span data-stu-id="a0150-196">The keys and certificates are generated in the specified output folder with appropriate suffix.</span></span>
    * <span data-ttu-id="a0150-197">**Proteja las claves generadas** , ya que el dispositivo confiará en los archivos binarios firmados con estas claves solo después del bloqueo.</span><span class="sxs-lookup"><span data-stu-id="a0150-197">**Secure your generated keys** as the device will trust binaries signed with these keys only after lockdown.</span></span>
    * <span data-ttu-id="a0150-198">Puede omitir este paso y usar las claves generadas previamente solo para realizar pruebas.</span><span class="sxs-lookup"><span data-stu-id="a0150-198">You may skip this step and use the pre-generated keys for testing only</span></span>

5. <span data-ttu-id="a0150-199">Configurar _Settings. XML_</span><span class="sxs-lookup"><span data-stu-id="a0150-199">Configure _settings.xml_</span></span>

    * <span data-ttu-id="a0150-200">Sección General: especificar los directorios del paquete</span><span class="sxs-lookup"><span data-stu-id="a0150-200">General section : Specify the package directories</span></span>
    * <span data-ttu-id="a0150-201">Sección herramientas: establecer la ruta de acceso de las herramientas</span><span class="sxs-lookup"><span data-stu-id="a0150-201">Tools section : Set the path for the tools</span></span>
        * <span data-ttu-id="a0150-202">`(e.g. <Windows10KitsRoot>C:\Program Files (x86)\Windows Kits\10\</Windows10KitsRoot>)` Windows10KitsRoot</span><span class="sxs-lookup"><span data-stu-id="a0150-202">Windows10KitsRoot `(e.g. <Windows10KitsRoot>C:\Program Files (x86)\Windows Kits\10\</Windows10KitsRoot>)`</span></span>
        * <span data-ttu-id="a0150-203">`(e.g. <WindowsSDKVersion>10.0.15063.0</WindowsSDKVersion>)` WindowsSDKVersion</span><span class="sxs-lookup"><span data-stu-id="a0150-203">WindowsSDKVersion `(e.g. <WindowsSDKVersion>10.0.15063.0</WindowsSDKVersion>)`</span></span>
            * <span data-ttu-id="a0150-204">La versión del SDK instalada en la máquina está en `C:\Program Files (x86)\Windows Kits\10\`</span><span class="sxs-lookup"><span data-stu-id="a0150-204">SDK version installed on your machine is under `C:\Program Files (x86)\Windows Kits\10\`</span></span>
    * <span data-ttu-id="a0150-205">Sección de SecureBoot: especificación de las claves que se van a usar para el arranque seguro (claves PK y SB)</span><span class="sxs-lookup"><span data-stu-id="a0150-205">SecureBoot section : Specify which keys to use for secure boot (PK and SB keys)</span></span>
    * <span data-ttu-id="a0150-206">Sección de BitLocker: especificar un certificado para la recuperación de datos de BitLocker (clave DRA)</span><span class="sxs-lookup"><span data-stu-id="a0150-206">BitLocker section : Specify a certificate for Bitlocker data recovery (DRA key)</span></span>
    * <span data-ttu-id="a0150-207">Sección SIPolicy: especificar los certificados que deben ser de confianza</span><span class="sxs-lookup"><span data-stu-id="a0150-207">SIPolicy section : Specify certs that should be trusted</span></span>
        * <span data-ttu-id="a0150-208">ScanPath: ruta de acceso del dispositivo para la exploración de archivos binarios, `\\a.b.c.d\C$`</span><span class="sxs-lookup"><span data-stu-id="a0150-208">ScanPath : Path of the device for scanning binaries , `\\a.b.c.d\C$`</span></span>
        * <span data-ttu-id="a0150-209">Update: firmante de SIPolicy (PAUTH Keys)</span><span class="sxs-lookup"><span data-stu-id="a0150-209">Update   : Signer of the SIPolicy (PAUTH keys)</span></span>
        * <span data-ttu-id="a0150-210">Usuario: certificados de modo de usuario (claves UMCI)</span><span class="sxs-lookup"><span data-stu-id="a0150-210">User     : User mode certificates (UMCI keys)</span></span> 
        * <span data-ttu-id="a0150-211">Kernel: certificados de modo kernel (claves KMCI)</span><span class="sxs-lookup"><span data-stu-id="a0150-211">Kernel   : Kernel mode certificates (KMCI keys)</span></span>
    * <span data-ttu-id="a0150-212">Empaquetado: especifique la configuración de la generación de paquetes.</span><span class="sxs-lookup"><span data-stu-id="a0150-212">Packaging : Specify the settings for the package generation</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a0150-213">Para ayudar a realizar las pruebas durante el ciclo de desarrollo inicial, Microsoft ha proporcionado claves y certificados generados previamente cuando corresponda.</span><span class="sxs-lookup"><span data-stu-id="a0150-213">In order to assist with testing during the initial development cycle, Microsoft has provided pre-generated keys and certificates where appropriate.</span></span>  <span data-ttu-id="a0150-214">Esto implica que los binarios de prueba, desarrollo y versión preliminar de Microsoft se consideran de confianza.</span><span class="sxs-lookup"><span data-stu-id="a0150-214">This implies that Microsoft Test, Development and Pre-Release binaries are considered trusted.</span></span>  <span data-ttu-id="a0150-215">Durante la creación del producto final y la generación de la imagen, asegúrese de quitar estos dirija y usar sus propias claves para garantizar un dispositivo totalmente bloqueado.</span><span class="sxs-lookup"><span data-stu-id="a0150-215">During final product creation and image generation, be sure to remove these certifcates and use your own keys to ensure a fully locked down device.</span></span>

<span data-ttu-id="a0150-216">6. Ejecute los siguientes comandos para generar los paquetes necesarios:</span><span class="sxs-lookup"><span data-stu-id="a0150-216">6.Execute the following commands to generate required packages:</span></span>

    ```powershell
    Import-Module .\IoTTurnkeySecurity.psm1
    # Generate the security packages for retail
    New-IoTTurnkeySecurity -ConfigFileName .\settings.xml
    (or)
    # Generate the security packages for test
    New-IoTTurnkeySecurity -ConfigFileName .\settings.xml -Test
    ```

### <a name="test-lockdown-packages"></a><span data-ttu-id="a0150-217">Probar paquetes bloqueados</span><span class="sxs-lookup"><span data-stu-id="a0150-217">Test Lockdown packages</span></span>
<span data-ttu-id="a0150-218">Puede probar los paquetes generados si los instala manualmente en un dispositivo desbloqueado mediante los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="a0150-218">You can test the generated packages by manually installing them on a unlocked device by the following steps</span></span>

1. <span data-ttu-id="a0150-219">Desbloquee el dispositivo con la imagen desbloqueada (imagen usada para digitalizar en el paso anterior).</span><span class="sxs-lookup"><span data-stu-id="a0150-219">Flash the device with the unlocked image (image used for scanning in earlier step).</span></span>
2. <span data-ttu-id="a0150-220">Conexión al dispositivo ([mediante SSH](../connect-your-device/SSH.md) o con [PowerShell](../connect-your-device/PowerShell.md))</span><span class="sxs-lookup"><span data-stu-id="a0150-220">Connect to the device ([using SSH](../connect-your-device/SSH.md) or using [Powershell](../connect-your-device/PowerShell.md))</span></span>
3. <span data-ttu-id="a0150-221">Copie los siguientes archivos. cab en el dispositivo en un directorio, por ejemplo `c:\OemInstall`</span><span class="sxs-lookup"><span data-stu-id="a0150-221">Copy the following .cab files to the device under a directory e.g. `c:\OemInstall`</span></span>
    * <span data-ttu-id="a0150-222">OEM. Personalizado. cmd. cab</span><span class="sxs-lookup"><span data-stu-id="a0150-222">OEM.Custom.Cmd.cab</span></span>
    * <span data-ttu-id="a0150-223">OEM. Security. BitLocker. cab</span><span class="sxs-lookup"><span data-stu-id="a0150-223">OEM.Security.BitLocker.cab</span></span>
    * <span data-ttu-id="a0150-224">OEM. Security. SecureBoot. cab</span><span class="sxs-lookup"><span data-stu-id="a0150-224">OEM.Security.SecureBoot.cab</span></span>
    * <span data-ttu-id="a0150-225">OEM. Security. DeviceGuard. cab</span><span class="sxs-lookup"><span data-stu-id="a0150-225">OEM.Security.DeviceGuard.cab</span></span>
4. <span data-ttu-id="a0150-226">Inicie el ensayo de los paquetes generados mediante el emisión de los siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="a0150-226">Initiate staging of the generated packages by issueing the following commands</span></span>

    ```C
    applyupdate -stage c:\OemInstall\OEM.Custom.Cmd.cab
    ```
    <span data-ttu-id="a0150-227">Si usa una imagen personalizada, tendrá que *omitir* este archivo y editar manualmente el `c:\windows\system32\oemcustomization.cmd` con el contenido disponible en `Output\OEMCustomization\OEMCustomization.cmd` archivo.</span><span class="sxs-lookup"><span data-stu-id="a0150-227">If you are using custom image, then you will have to *skip* this file and manually edit the `c:\windows\system32\oemcustomization.cmd` with the contents available in `Output\OEMCustomization\OEMCustomization.cmd` file</span></span>

    ```C
    applyupdate -stage c:\OemInstall\OEM.Security.BitLocker.cab
    applyupdate -stage c:\OemInstall\OEM.Security.SecureBoot.cab
    applyupdate -stage c:\OemInstall\OEM.Security.DeviceGuard.cab

5. Finally, commit the packages via

    ```C
    applyupdate -commit
    ```

6. <span data-ttu-id="a0150-228">El dispositivo se reiniciará en Update OS (mostrando engranajes) para instalar los paquetes y se reiniciará de nuevo en el sistema operativo principal.</span><span class="sxs-lookup"><span data-stu-id="a0150-228">The device will reboot into update OS (showing gears) to install the packages and will reboot again to main OS.</span></span>  <span data-ttu-id="a0150-229">Una vez que el dispositivo se reinicia en los principales, se habilitará el arranque seguro y se debe usar SIPolicy.</span><span class="sxs-lookup"><span data-stu-id="a0150-229">Once the device reboots back into MainOS, Secure Boot will be enabled and SIPolicy should be engaged.</span></span>
7. <span data-ttu-id="a0150-230">Reinicie el dispositivo para activar el cifrado de BitLocker.</span><span class="sxs-lookup"><span data-stu-id="a0150-230">Reboot the device again to activate the Bitlocker encryption.</span></span>
8. <span data-ttu-id="a0150-231">Probar las características de seguridad</span><span class="sxs-lookup"><span data-stu-id="a0150-231">Test the security features</span></span>
    * <span data-ttu-id="a0150-232">SecureBoot: Pruebe `bcdedit /debug on`, obtendrá un error que indica que el valor está protegido por la Directiva de arranque seguro.</span><span class="sxs-lookup"><span data-stu-id="a0150-232">SecureBoot: try `bcdedit /debug on` , you will get an error stating that the value is protected by secure boot policy</span></span>
    * <span data-ttu-id="a0150-233">BitLocker: ejecute `start /wait sectask.exe -waitencryptcomplete:1`, si ERRORLEVEL es `-2147023436` (ERROR_TIMEOUT), el cifrado no se completa.</span><span class="sxs-lookup"><span data-stu-id="a0150-233">BitLocker: Run `start /wait sectask.exe -waitencryptcomplete:1`, if ERRORLEVEL is `-2147023436` (ERROR_TIMEOUT) then encryption is not complete.</span></span> <span data-ttu-id="a0150-234">Al ejecutar sectask. exe desde un archivo. cmd, omita el `start /wait`.</span><span class="sxs-lookup"><span data-stu-id="a0150-234">When running sectask.exe from a .cmd file omit the `start /wait`.</span></span>
    * <span data-ttu-id="a0150-235">DeviceGuard: ejecute cualquier binario sin firmar o binario firmado con certificado que no esté en la lista SIPolicy y confirme que no se puede ejecutar.</span><span class="sxs-lookup"><span data-stu-id="a0150-235">DeviceGuard : Run any unsigned binary or a binary signed with certificate not in the SIPolicy list and confirm that it fails to run.</span></span>

### <a name="generate-lockdown-image"></a><span data-ttu-id="a0150-236">Generar imagen de bloqueo</span><span class="sxs-lookup"><span data-stu-id="a0150-236">Generate Lockdown image</span></span>

<span data-ttu-id="a0150-237">Después de validar que los paquetes de bloqueo funcionan según la configuración definida anteriormente, puede incluir estos paquetes en la imagen siguiendo los pasos indicados a continuación.</span><span class="sxs-lookup"><span data-stu-id="a0150-237">After validating that the lockdown packages are working as per the settings defined earlier, you can then include these packages into the image by following the below given steps.</span></span> <span data-ttu-id="a0150-238">Lea la [Guía de fabricación de IOT](https://aka.ms/iotcoreguide) para obtener instrucciones de creación de imágenes personalizadas.</span><span class="sxs-lookup"><span data-stu-id="a0150-238">Read the [IoT manufacturing guide](https://aka.ms/iotcoreguide) for custom image creation instructions.</span></span>

1. <span data-ttu-id="a0150-239">En el directorio del área de trabajo, actualice los siguientes archivos desde el directorio de salida generado anterior</span><span class="sxs-lookup"><span data-stu-id="a0150-239">In the workspace directory, update the following files from the generated output directory above</span></span>
    * <span data-ttu-id="a0150-240">SecureBoot: `Copy ..\Output\SecureBoot\*.bin  ..\Workspace\Common\Packages\Security.SecureBoot`</span><span class="sxs-lookup"><span data-stu-id="a0150-240">SecureBoot : `Copy ..\Output\SecureBoot\*.bin  ..\Workspace\Common\Packages\Security.SecureBoot`</span></span>
      * <span data-ttu-id="a0150-241">SetVariable_db. bin</span><span class="sxs-lookup"><span data-stu-id="a0150-241">SetVariable_db.bin</span></span>
      * <span data-ttu-id="a0150-242">SetVariable_kek. bin</span><span class="sxs-lookup"><span data-stu-id="a0150-242">SetVariable_kek.bin</span></span>
      * <span data-ttu-id="a0150-243">SetVariable_pk. bin</span><span class="sxs-lookup"><span data-stu-id="a0150-243">SetVariable_pk.bin</span></span>
    * <span data-ttu-id="a0150-244">BitLocker: `Copy ..\Output\Bitlocker\*.* ..\Workspace\Common\Packages\Security.Bitlocker`</span><span class="sxs-lookup"><span data-stu-id="a0150-244">BitLocker : `Copy ..\Output\Bitlocker\*.* ..\Workspace\Common\Packages\Security.Bitlocker`</span></span>
      * <span data-ttu-id="a0150-245">Destask. XML</span><span class="sxs-lookup"><span data-stu-id="a0150-245">DETask.xml</span></span>
      * <span data-ttu-id="a0150-246">Security. BitLocker. WM. XML</span><span class="sxs-lookup"><span data-stu-id="a0150-246">Security.Bitlocker.wm.xml</span></span>
      * <span data-ttu-id="a0150-247">Setup. BitLocker. cmd</span><span class="sxs-lookup"><span data-stu-id="a0150-247">setup.bitlocker.cmd</span></span>
    * <span data-ttu-id="a0150-248">DeviceGuard: `Copy ..\Output\DeviceGuard\*.*  ..\Workspace\Common\Packages\Security.DeviceGuard`</span><span class="sxs-lookup"><span data-stu-id="a0150-248">DeviceGuard : `Copy ..\Output\DeviceGuard\*.*  ..\Workspace\Common\Packages\Security.DeviceGuard`</span></span>
      * <span data-ttu-id="a0150-249">SIPolicyOn. p7b</span><span class="sxs-lookup"><span data-stu-id="a0150-249">SIPolicyOn.p7b</span></span>
      * <span data-ttu-id="a0150-250">SIPolicyOff. p7b</span><span class="sxs-lookup"><span data-stu-id="a0150-250">SIPolicyOff.p7b</span></span>
  
2. <span data-ttu-id="a0150-251">Agregue RetailOEMInput. XML y TestOEMInput. XML en el directorio ProductName con el identificador de característica del paquete de bloqueo</span><span class="sxs-lookup"><span data-stu-id="a0150-251">Add RetailOEMInput.xml and TestOEMInput.xml under the ProductName directory with lockdown package feature ID</span></span>
    * `<Feature>SEC_BITLOCKER</Feature>`
    * `<Feature>SEC_SECUREBOOT</Feature>`
    * `<Feature>SEC_DEVICEGUARD</Feature>`
3. <span data-ttu-id="a0150-252">Volver a generar la imagen</span><span class="sxs-lookup"><span data-stu-id="a0150-252">Re-generate Image</span></span>
    * <span data-ttu-id="a0150-253">`buildpkg all` (esto genera nuevos paquetes de bloqueo basados en archivos de directivas anteriores)</span><span class="sxs-lookup"><span data-stu-id="a0150-253">`buildpkg all` (this generates new lockdown packages based on above policy files)</span></span>
    * <span data-ttu-id="a0150-254">`buildimage ProductName test(or)retail` (esto genera un nuevo flash. FFU)</span><span class="sxs-lookup"><span data-stu-id="a0150-254">`buildimage ProductName test(or)retail`  (this generates new Flash.ffu)</span></span>
4. <span data-ttu-id="a0150-255">Parpadee el dispositivo con este nuevo flash. FFU y valide las características de seguridad.</span><span class="sxs-lookup"><span data-stu-id="a0150-255">Flash the device with this new Flash.ffu and validate the security features.</span></span>

<span data-ttu-id="a0150-256">Vea [SecureSample](https://github.com/ms-iot/iot-adk-addonkit/tree/master/Workspace/Source-arm/Products/SecureSample) como ejemplo de configuración de la placa Dragon de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="a0150-256">See [SecureSample](https://github.com/ms-iot/iot-adk-addonkit/tree/master/Workspace/Source-arm/Products/SecureSample) as an example of a lockdown dragon board configuration.</span></span>

<span data-ttu-id="a0150-257">Como alternativa, puede generar los paquetes de seguridad en el propio Shell de IoTCore, consulte [agregar paquetes de seguridad](https://github.com/ms-iot/iot-adk-addonkit/tree/master/Tools#adding-security-packages) para los detalles.</span><span class="sxs-lookup"><span data-stu-id="a0150-257">Alternatively, you can generate the security packages in the IoTCore Shell itself, see [adding security packages](https://github.com/ms-iot/iot-adk-addonkit/tree/master/Tools#adding-security-packages) for the details.</span></span>


### <a name="developing-with-codesigning-enforcement-enabled"></a><span data-ttu-id="a0150-258">Desarrollo con la aplicación de codiseño habilitada</span><span class="sxs-lookup"><span data-stu-id="a0150-258">Developing with CodeSigning Enforcement Enabled</span></span>

<span data-ttu-id="a0150-259">Una vez que se generan los paquetes y se activa el bloqueo, todos los archivos binarios introducidos en la imagen durante el desarrollo deberán firmarse de forma adecuada.</span><span class="sxs-lookup"><span data-stu-id="a0150-259">Once the packages are generated and lockdown is activated, any binaries introduced into the image during development will need to be signed appropriately.</span></span> <span data-ttu-id="a0150-260">Asegúrese de que los archivos binarios de modo de usuario están firmados con la clave _.\Keys\ \* \* \*-UMCI. pfx_.</span><span class="sxs-lookup"><span data-stu-id="a0150-260">Ensure that your user-mode binaries are signed with the key  _.\Keys\ \*\*\*-UMCI.pfx_.</span></span> <span data-ttu-id="a0150-261">En el caso de la firma en modo kernel, como en el caso de los controladores, deberá especificar sus propias claves de firma y asegurarse de que también se incluyen en el SIPolicy anterior.</span><span class="sxs-lookup"><span data-stu-id="a0150-261">For kernel-mode signing, such as for drivers, you’ll need to specify your own signing keys and make sure that they are also included in the SIPolicy above.</span></span>

### <a name="unlocking-encrypted-drives"></a><span data-ttu-id="a0150-262">Desbloqueo de unidades cifradas</span><span class="sxs-lookup"><span data-stu-id="a0150-262">Unlocking Encrypted Drives</span></span>

<span data-ttu-id="a0150-263">Durante el desarrollo y las pruebas, al intentar leer el contenido de un dispositivo cifrado sin conexión (por ejemplo, tarjeta SD para MinnowBoardMax o eMMC de DragonBoard a través del modo de almacenamiento masivo USB), se puede usar ' DiskPart ' para asignar una letra de unidad a los principales y al volumen de datos (vamos a Supongamos que es v: para los principales y w: para los datos).</span><span class="sxs-lookup"><span data-stu-id="a0150-263">During development and testing, when attempting to read contents from an encrypted device offline (e.g. SD card for MinnowBoardMax or DragonBoard's eMMC through USB mass storage mode), 'diskpart' may be used to assign a drive letter to MainOS and Data volume (let's assume v: for MainOS and w: for Data).</span></span>
<span data-ttu-id="a0150-264">Los volúmenes aparecerán bloqueados y deben desbloquearse manualmente.</span><span class="sxs-lookup"><span data-stu-id="a0150-264">The volumes will appear locked and need to be manually unlocked.</span></span> <span data-ttu-id="a0150-265">Esto puede realizarse en cualquier máquina que tenga instalado el certificado OEM-DRA. pfx (incluido en el [ejemplo DeviceLockDown](https://github.com/ms-iot/security/tree/master/TurnkeySecurity)).</span><span class="sxs-lookup"><span data-stu-id="a0150-265">This can be done on any machine that has the OEM-DRA.pfx certificate installed (included in the [DeviceLockDown sample](https://github.com/ms-iot/security/tree/master/TurnkeySecurity)).</span></span> <span data-ttu-id="a0150-266">Instale el archivo PFX y, a continuación, ejecute los siguientes comandos desde un símbolo del sistema de CMD administrativo:</span><span class="sxs-lookup"><span data-stu-id="a0150-266">Install the PFX and then run the following commands from an administrative CMD prompt:</span></span>

* `manage-bde -unlock v: -cert -cf OEM-DRA.cer`
* `manage-bde -unlock w: -cert -cf OEM-DRA.cer`

<span data-ttu-id="a0150-267">Si es necesario tener acceso a los contenidos con frecuencia sin conexión, se puede configurar el desbloqueo automático de BitLocker para los volúmenes después del desbloqueo inicial mediante los siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="a0150-267">If the contents need to be frequently accessed offline, BitLocker autounlock can be set up for the volumes after the initial unlock using the following commands:</span></span>

* `manage-bde -autounlock v: -enable`
* `manage-bde -autounlock w: -enable`

### <a name="disabling-bitlocker"></a><span data-ttu-id="a0150-268">Deshabilitar BitLocker</span><span class="sxs-lookup"><span data-stu-id="a0150-268">Disabling BitLocker</span></span>

<span data-ttu-id="a0150-269">Si surge la necesidad de deshabilitar BitLocker temporalmente, iniciar una sesión remota de PowerShell con el dispositivo de IoT y ejecute el siguiente comando: `sectask.exe -disable`.</span><span class="sxs-lookup"><span data-stu-id="a0150-269">Should there arise a need to temporarily disable BitLocker, initate a remote PowerShell session with your IoT device and run the following command: `sectask.exe -disable`.</span></span>  

> [!NOTE]
> <span data-ttu-id="a0150-270">El cifrado de dispositivo se volverá a habilitar en el siguiente arranque del dispositivo a menos que se deshabilite la tarea de cifrado programado.</span><span class="sxs-lookup"><span data-stu-id="a0150-270">Device encryption will be re-enabled on subsequent device boot unless the scheduled encryption task is disabled.</span></span>


