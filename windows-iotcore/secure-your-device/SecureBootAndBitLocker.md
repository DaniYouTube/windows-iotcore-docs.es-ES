---
title: Habilitar el arranque seguro, BitLocker y Device Guard en Windows 10 IoT Core
author: saraclay
ms.author: saclayt
ms.date: 08/28/2017
ms.topic: article
description: Obtenga información sobre cómo habilitar el arranque seguro, BitLocker y Device Guard en Windows 10 IoT Core
keywords: Windows iot, arranque seguro, BitLocker, protección de dispositivos, seguridad, seguridad de llave en mano
ms.openlocfilehash: 092be64210f651c25156e93885a63f35c22d4791
ms.sourcegitcommit: fcc0c6add468040e2f676893b44b260e3ddc3c52
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/16/2019
ms.locfileid: "65779392"
---
# <a name="enabling-secure-boot-bitlocker-and-device-guard-on-windows-10-iot-core"></a><span data-ttu-id="d0ae3-104">Habilitar el arranque seguro, BitLocker y Device Guard en Windows 10 IoT Core</span><span class="sxs-lookup"><span data-stu-id="d0ae3-104">Enabling Secure Boot, BitLocker, and Device Guard on Windows 10 IoT Core</span></span>

<span data-ttu-id="d0ae3-105">Windows 10 IoT Core incluye ofertas de características de seguridad como arranque seguro de UEFI, cifrado de dispositivo de BitLocker y Device Guard.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-105">Windows 10 IoT Core includes security feature offerings such as UEFI Secure Boot, BitLocker Device Encryption and Device Guard.</span></span>  <span data-ttu-id="d0ae3-106">Estos le ayudará a los generadores de dispositivo crear totalmente bloqueado de los dispositivos de IoT de Windows que sean resistentes a muchos tipos diferentes de los ataques.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-106">These will assist device builders in creating fully locked down Windows IoT devices that are resilient to many different types of attacks.</span></span>  <span data-ttu-id="d0ae3-107">Juntas, estas características ofrecen la protección óptima que garantiza que se iniciará una plataforma de una forma definida, mientras el bloqueo de archivos binarios desconocidos y proteger los datos de usuario mediante el uso de cifrado de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-107">Together, these features provide the optimal protection that ensures that a platform will launch in a defined way, while locking out unknown binaries and protecting user data through the use of device encryption.</span></span>

## <a name="boot-order"></a><span data-ttu-id="d0ae3-108">Orden de arranque</span><span class="sxs-lookup"><span data-stu-id="d0ae3-108">Boot Order</span></span>

<span data-ttu-id="d0ae3-109">Antes de que podemos adentrarnos en los componentes individuales que proporcionan una plataforma segura para el dispositivo de IoT, es necesario comprender el orden de arranque en un dispositivo Windows 10 IoT Core.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-109">An understanding of the boot order on a Windows 10 IoT Core device is needed before we can delve into the individual components that provide a secure platform for the IoT device.</span></span>

<span data-ttu-id="d0ae3-110">Hay tres áreas principales que se producen cuando un dispositivo de IoT está encendido, todo el proceso para la carga de kernel del sistema operativo y la ejecución de la aplicación instalada.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-110">There are three main areas that occur from when an IoT device is powered on, all the way through to the OS kernel loading and execution of installed application.</span></span>

* <span data-ttu-id="d0ae3-111">Arranque seguro de plataforma</span><span class="sxs-lookup"><span data-stu-id="d0ae3-111">Platform Secure Boot</span></span>
* <span data-ttu-id="d0ae3-112">Arranque seguro (UEFI) de la interfaz de Firmware Extensible unificada</span><span class="sxs-lookup"><span data-stu-id="d0ae3-112">Unified Extensible Firmware Interface (UEFI) Secure Boot</span></span>
* <span data-ttu-id="d0ae3-113">Integridad de código de Windows</span><span class="sxs-lookup"><span data-stu-id="d0ae3-113">Windows Code Integrity</span></span>

![Orden de arranque](../media/SecureBootAndBitLocker/BootOrder.jpg)

<span data-ttu-id="d0ae3-115">Puede encontrar información adicional sobre el proceso de arranque de Windows 10 [aquí](https://docs.microsoft.com/windows/security/information-protection/secure-the-windows-10-boot-process).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-115">Additional information on the Windows 10 boot process can be found [here](https://docs.microsoft.com/windows/security/information-protection/secure-the-windows-10-boot-process).</span></span>

## <a name="locking-down-iot-devices"></a><span data-ttu-id="d0ae3-116">Dispositivos IoT bloquear</span><span class="sxs-lookup"><span data-stu-id="d0ae3-116">Locking-down IoT Devices</span></span>

<span data-ttu-id="d0ae3-117">En orden de bloqueo de un dispositivo Windows IoT, se deben realizar las siguientes consideraciones.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-117">In order to lockdown a Windows IoT device, the following considerations must be made.</span></span>

### <a name="platform-secure-boot"></a><span data-ttu-id="d0ae3-118">Arranque seguro de plataforma</span><span class="sxs-lookup"><span data-stu-id="d0ae3-118">Platform Secure Boot</span></span>

<span data-ttu-id="d0ae3-119">Cuando el dispositivo está encendido en primer lugar, es el primer paso del proceso general de arranque cargar y ejecutar firmware cargadores de arranque, que inicializan el hardware en los dispositivos y proporcionan funcionalidad de intermitencia de emergencia.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-119">When the device is first powered on, the first step in the overall boot process is to load and run firmware boot loaders, which initialize the hardware on the devies and provide emergency flashing functionality.</span></span> <span data-ttu-id="d0ae3-120">El entorno de UEFI, a continuación, se cargan y se cede el control.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-120">The UEFI environment is then loaded and control is handed over.</span></span>

<span data-ttu-id="d0ae3-121">Estos cargadores de arranque de firmware son específicos de SoC, por lo que necesita trabajar con el fabricante del dispositivo adecuado para tener estos cargadores de arranque creados en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-121">These firmware boot loaders are SoC-specific, so you will need to work with the appropriate device manufacturer to have these boot loaders created on the device.</span></span>

<span data-ttu-id="d0ae3-122">Antes de que podemos adentrarnos en los componentes individuales que proporcionan una plataforma segura para el dispositivo de IoT, es necesario comprender el orden de arranque en un dispositivo Windows 10 IoT Core.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-122">An understanding of the boot order on a Windows 10 IoT Core device is needed before we can delve into the individual components that provide a secure platform for the IoT device.</span></span>

<span data-ttu-id="d0ae3-123">Hay tres áreas principales que se producen cuando un dispositivo de IoT está encendido, todo el proceso para la carga de kernel del sistema operativo y la ejecución de la aplicación instalada.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-123">There are three main areas that occur from when an IoT device is powered on, all the way through to the OS kernel loading and execution of installed application.</span></span>

* <span data-ttu-id="d0ae3-124">Arranque seguro de plataforma</span><span class="sxs-lookup"><span data-stu-id="d0ae3-124">Platform Secure Boot</span></span>
* <span data-ttu-id="d0ae3-125">Arranque seguro (UEFI) de la interfaz de Firmware Extensible unificada</span><span class="sxs-lookup"><span data-stu-id="d0ae3-125">Unified Extensible Firmware Interface (UEFI) Secure Boot</span></span>
* <span data-ttu-id="d0ae3-126">Integridad de código de Windows</span><span class="sxs-lookup"><span data-stu-id="d0ae3-126">Windows Code Integrity</span></span>

![Captura de pantalla de panel](../media/SecureBootAndBitLocker/BootOrder.jpg)

<span data-ttu-id="d0ae3-128">Puede encontrar información adicional sobre el proceso de arranque de Windows 10 [aquí](https://docs.microsoft.com/windows/security/information-protection/secure-the-windows-10-boot-process).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-128">Additional information on the Windows 10 boot process can be found [here](https://docs.microsoft.com/windows/security/information-protection/secure-the-windows-10-boot-process).</span></span>

<span data-ttu-id="d0ae3-129">En orden de bloqueo de un dispositivo Windows IoT, se deben realizar las siguientes consideraciones.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-129">In order to lockdown a Windows IoT device, the following considerations must be made.</span></span>

### <a name="platform-secure-boot"></a><span data-ttu-id="d0ae3-130">Arranque seguro de plataforma</span><span class="sxs-lookup"><span data-stu-id="d0ae3-130">Platform Secure Boot</span></span>

<span data-ttu-id="d0ae3-131">Cuando el dispositivo está encendido en primer lugar, es el primer paso del proceso general de arranque cargar y ejecutar firmware cargadores de arranque, que inicializan el hardware en los dispositivos y proporcionan funcionalidad de intermitencia de emergencia.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-131">When the device is first powered on, the first step in the overall boot process is to load and run firmware boot loaders, which initialize the hardware on the devies and provide emergency flashing functionality.</span></span> <span data-ttu-id="d0ae3-132">El entorno de UEFI, a continuación, se cargan y se cede el control.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-132">The UEFI environment is then loaded and control is handed over.</span></span>

<span data-ttu-id="d0ae3-133">Estos cargadores de arranque de firmware son específicos de SoC, por lo que necesita trabajar con el fabricante del dispositivo adecuado para tener estos cargadores de arranque creados en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-133">These firmware boot loaders are SoC-specific, so you will need to work with the appropriate device manufacturer to have these boot loaders created on the device.</span></span>

### <a name="uefi-secure-boot"></a><span data-ttu-id="d0ae3-134">Arranque seguro de la UEFI</span><span class="sxs-lookup"><span data-stu-id="d0ae3-134">UEFI Secure Boot</span></span>

<span data-ttu-id="d0ae3-135">Arranque seguro de UEFI es el primer punto de cumplimiento de directivas y se encuentra en UEFI.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-135">UEFI Secure Boot is the first policy enforcement point, and is located in UEFI.</span></span>  <span data-ttu-id="d0ae3-136">Restringe el sistema para permitir solo la ejecución de archivos binarios firmados por una entidad determinada, como los controladores de firmware, ROM, controladores UEFI o aplicaciones y los cargadores de arranque UEFI.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-136">It restricts the system to only allow execution of binaries signed by a specified authority, such as firmware drivers, option ROMs, UEFI drivers or applications, and UEFI boot loaders.</span></span> <span data-ttu-id="d0ae3-137">Esta característica evita que código desconocido se ejecuta en la plataforma y potencialmente debilitar su seguridad de ella.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-137">This feature prevents unknown code from being executed on the platform and potentially weakening the security posture of it.</span></span> <span data-ttu-id="d0ae3-138">Arranque seguro reduce el riesgo de ataques de malware previo al arranque en el dispositivo, como los rootkits.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-138">Secure Boot reduces the risk of pre-boot malware attacks to the device, such as rootkits.</span></span> 

<span data-ttu-id="d0ae3-139">OEM, deberá almacenar el arranque seguro de UEFI bases de datos en el dispositivo de IoT en tiempo de fabricación.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-139">As the OEM, you need to store the UEFI Secure Boot databases on the IoT device at manufacture time.</span></span> <span data-ttu-id="d0ae3-140">Estas bases de datos incluyen la firma de base de datos (db), revocar la firma (dbx) y la base de datos de inscripción de clave (KEK).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-140">These databases include the Signature database (db), Revoked Signature database (dbx), and the Key Enrollment Key database (KEK).</span></span> <span data-ttu-id="d0ae3-141">Estas bases de datos se almacenan en el firmware RAM no volátil (NV-RAM) del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-141">These databases are stored on the firmware nonvolatile RAM (NV-RAM) of the device.</span></span>

<span data-ttu-id="d0ae3-142">En orden de bloqueo de un dispositivo Windows IoT, se deben realizar las siguientes consideraciones.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-142">In order to lockdown a Windows IoT device, the following considerations must be made.</span></span>

### <a name="platform-secure-boot"></a><span data-ttu-id="d0ae3-143">Arranque seguro de plataforma</span><span class="sxs-lookup"><span data-stu-id="d0ae3-143">Platform Secure Boot</span></span>

<span data-ttu-id="d0ae3-144">Cuando el dispositivo está encendido en primer lugar, es el primer paso del proceso general de arranque cargar y ejecutar firmware cargadores de arranque, que inicializan el hardware en los dispositivos y proporcionan funcionalidad de intermitencia de emergencia.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-144">When the device is first powered on, the first step in the overall boot process is to load and run firmware boot loaders, which initialize the hardware on the devies and provide emergency flashing functionality.</span></span> <span data-ttu-id="d0ae3-145">El entorno de UEFI, a continuación, se cargan y se cede el control.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-145">The UEFI environment is then loaded and control is handed over.</span></span>

<span data-ttu-id="d0ae3-146">Estos cargadores de arranque de firmware son específicos de SoC, por lo que necesita trabajar con el fabricante del dispositivo adecuado para tener estos cargadores de arranque creados en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-146">These firmware boot loaders are SoC-specific, so you will need to work with the appropriate device manufacturer to have these boot loaders created on the device.</span></span>

### <a name="uefi-secure-boot"></a><span data-ttu-id="d0ae3-147">Arranque seguro de la UEFI</span><span class="sxs-lookup"><span data-stu-id="d0ae3-147">UEFI Secure Boot</span></span>

<span data-ttu-id="d0ae3-148">Arranque seguro de UEFI es el primer punto de cumplimiento de directivas y se encuentra en UEFI.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-148">UEFI Secure Boot is the first policy enforcement point, and is located in UEFI.</span></span>  <span data-ttu-id="d0ae3-149">Restringe el sistema para permitir solo la ejecución de archivos binarios firmados por una entidad determinada, como los controladores de firmware, ROM, controladores UEFI o aplicaciones y los cargadores de arranque UEFI.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-149">It restricts the system to only allow execution of binaries signed by a specified authority, such as firmware drivers, option ROMs, UEFI drivers or applications, and UEFI boot loaders.</span></span> <span data-ttu-id="d0ae3-150">Esta característica evita que código desconocido se ejecuta en la plataforma y potencialmente debilitar su seguridad de ella.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-150">This feature prevents unknown code from being executed on the platform and potentially weakening the security posture of it.</span></span> <span data-ttu-id="d0ae3-151">Arranque seguro reduce el riesgo de ataques de malware previo al arranque en el dispositivo, como los rootkits.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-151">Secure Boot reduces the risk of pre-boot malware attacks to the device, such as rootkits.</span></span> 

<span data-ttu-id="d0ae3-152">OEM, deberá almacenar el arranque seguro de UEFI bases de datos en el dispositivo de IoT en tiempo de fabricación.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-152">As the OEM, you need to store the UEFI Secure Boot databases on the IoT device at manufacture time.</span></span> <span data-ttu-id="d0ae3-153">Estas bases de datos incluyen la firma de base de datos (db), revocar la firma (dbx) y la base de datos de inscripción de clave (KEK).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-153">These databases include the Signature database (db), Revoked Signature database (dbx), and the Key Enrollment Key database (KEK).</span></span> <span data-ttu-id="d0ae3-154">Estas bases de datos se almacenan en el firmware RAM no volátil (NV-RAM) del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-154">These databases are stored on the firmware nonvolatile RAM (NV-RAM) of the device.</span></span>

* <span data-ttu-id="d0ae3-155">**Base de datos de la firma (db):** Esto enumera los firmantes o códigos hash de la imagen de cargadores del sistema operativo, aplicaciones UEFI y controladores UEFI que pueden cargarse en el dispositivo</span><span class="sxs-lookup"><span data-stu-id="d0ae3-155">**Signature Database (db):** This lists the signers or image hashes of operating system loaders, UEFI applications and UEFI drivers that are allowed to be loaded on the device</span></span>

* <span data-ttu-id="d0ae3-156">**Revocar la base de datos de firma (dbx):** Esto enumera los firmantes o códigos hash de la imagen de cargadores del sistema operativo, aplicaciones UEFI y controladores UEFI que ya no son de confianza y están *no* permite que se cargue en el dispositivo</span><span class="sxs-lookup"><span data-stu-id="d0ae3-156">**Revoked Signature Database (dbx):** This lists the signers or image hashes of operating system loaders, UEFI applications and UEFI drivers that are no longer trusted, and are *NOT* allowed to be loaded on the device</span></span> 

* <span data-ttu-id="d0ae3-157">**Base de datos de inscripción de clave (KEK):** Contiene una lista de claves que pueden usarse para actualizar la firma y revocar las bases de datos de la firma de firma.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-157">**Key Enrollment Key database (KEK):** Contains a list of signing keys that can be used to update the signature and revoked signature databases.</span></span>

<span data-ttu-id="d0ae3-158">Una vez que se crean estas bases de datos y se agrega al dispositivo, el OEM bloquea el firmware de la edición y genera una plataforma (PK) de la clave de firma.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-158">Once these databases are created and added to the device, the OEM locks the firmware from editing, and generates a platform signing key (PK).</span></span> <span data-ttu-id="d0ae3-159">Esta clave se puede utilizar para firmar las actualizaciones a la KEK o para deshabilitar arranque seguro de UEFI.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-159">This key can be used to sign updates to the KEK or to disable UEFI Secure Boot.</span></span>

<span data-ttu-id="d0ae3-160">Estos son los pasos realizados por el arranque seguro de UEFI:</span><span class="sxs-lookup"><span data-stu-id="d0ae3-160">Here are the steps taken by UEFI Secure Boot:</span></span>

1. <span data-ttu-id="d0ae3-161">Después de que el dispositivo está encendido, las bases de datos de la firma cada comprueban con la plataforma (PK) de la clave de firma.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-161">After the device is powered on, the signature databases are each checked against the platform signing key (PK).</span></span>
2. <span data-ttu-id="d0ae3-162">Si el firmware no es de confianza, el firmware UEFI inicia recuperación específica del OEM para restaurar el firmware de confianza.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-162">If the firmware isn't trusted, UEFI firmware initiates OEM-specific recovery to restore trusted firmware.</span></span>
3. <span data-ttu-id="d0ae3-163">Si no se puede cargar el Administrador de arranque de Windows, el firmware intentará arrancar una copia de seguridad del Administrador de arranque de Windows.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-163">If Windows Boot Manager cannot be loaded, the firmware will attempt to boot a backup copy of Windows Boot Manager.</span></span> <span data-ttu-id="d0ae3-164">Si esto tampoco funciona, el firmware UEFI inicia corrección específica del OEM.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-164">If this also fails, the UEFI firmware initiates OEM-specific remediation.</span></span>
4. <span data-ttu-id="d0ae3-165">Administrador de arranque de Windows se ejecuta y comprueba la firma digital del Kernel de Windows.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-165">Windows Boot Manager runs and verifies the digital signature of the Windows Kernel.</span></span> <span data-ttu-id="d0ae3-166">Si la confianza, el Administrador de arranque de Windows pasa el control al Kernel de Windows.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-166">If trusted, Windows Boot Manager passes control to the Windows Kernel.</span></span>

<span data-ttu-id="d0ae3-167">Obtener más detalles sobre el arranque seguro, junto con instrucciones para la administración y la creación de la clave está disponible [aquí](https://technet.microsoft.com/library/dn747883.aspx).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-167">Additional details on Secure Boot, along with key creation and management guidance, is available [here](https://technet.microsoft.com/library/dn747883.aspx).</span></span>

### <a name="windows-code-integrity"></a><span data-ttu-id="d0ae3-168">Integridad de código de Windows</span><span class="sxs-lookup"><span data-stu-id="d0ae3-168">Windows Code Integrity</span></span>

<span data-ttu-id="d0ae3-169">Integridad de código de Windows (WCI) mejora la seguridad del sistema operativo al validar la integridad de un controlador o una aplicación cada vez que se carga en la memoria.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-169">Windows Code Integrity (WCI) improves the security of the operating system by validating the integrity of a driver or application each time it is loaded into memory.</span></span> <span data-ttu-id="d0ae3-170">Elemento de configuración contiene dos componentes principales: integridad de código de modo Kernel (KMCI) y la integridad de código de modo de usuario (UMCI).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-170">CI contains two main components - Kernel Mode Code Integrity (KMCI) and User Mode Code Integrity (UMCI).</span></span>

<span data-ttu-id="d0ae3-171">Integridad de código configurable (CCI) es una característica de Windows 10 que permite que los generadores de dispositivo para bloquear un dispositivo y solo le permiten ejecutar y ejecutar código que se firma y de confianza.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-171">Configurable Code Integrity (CCI) is a feature in Windows 10 that allows device builders to lockdown a device and only allow it to run and execute code that is signed and trusted.</span></span>  <span data-ttu-id="d0ae3-172">Para ello, los generadores de dispositivo pueden crear una directiva de integridad de código en un dispositivo "golden" (versión de lanzamiento final de hardware y software) y, a continuación, proteger y aplicar esta directiva en todos los dispositivos en la fábrica.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-172">To do so, device builders can create a code integrity policy on a 'golden' device (final release version of hardware and software) and then secure and apply this policy on all devices on the factory floor.</span></span>

<span data-ttu-id="d0ae3-173">Para más información sobre la implementación de directivas de integridad de código, auditoría y cumplimiento, consulte la documentación más reciente de technet [aquí](https://technet.microsoft.com/itpro/windows/keep-secure/deploy-code-integrity-policies-steps).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-173">To learn more about deploying code integrity policies, auditing and enforcement, check out the latest technet documentation [here](https://technet.microsoft.com/itpro/windows/keep-secure/deploy-code-integrity-policies-steps).</span></span>

<span data-ttu-id="d0ae3-174">Estos son los pasos seguidos por integridad de código de Windows:</span><span class="sxs-lookup"><span data-stu-id="d0ae3-174">Here are the steps taken by Windows Code Integrity:</span></span>

1. <span data-ttu-id="d0ae3-175">Kernel de Windows comprobará que todos los demás componentes en la base de datos de la firma antes de la carga.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-175">Windows Kernel will verify all other components against the signature database before loading.</span></span> <span data-ttu-id="d0ae3-176">Esto incluye los controladores, los archivos de inicio y ELAM (temprana antimalware de inicio).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-176">This includes drivers, startup files and ELAM (Early Launch Anti-Malware).</span></span>
2. <span data-ttu-id="d0ae3-177">Kernel de Windows cargará los componentes de confianza en el proceso de inicio y prohibir la carga de los componentes de confianza.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-177">Windows Kernel will load the trusted components in the startup process, and prohibit loading of the untrusted components.</span></span>
3. <span data-ttu-id="d0ae3-178">Carga del sistema operativo de Windows 10 IoT Core, junto con las aplicaciones instaladas.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-178">Windows 10 IoT Core operating system loads, along with any installed applications.</span></span>

### <a name="bitlocker-device-encryption"></a><span data-ttu-id="d0ae3-179">Cifrado de dispositivos de BitLocker</span><span class="sxs-lookup"><span data-stu-id="d0ae3-179">BitLocker Device Encryption</span></span>

<span data-ttu-id="d0ae3-180">Windows 10 IoT Core también implementa una versión ligera de cifrado de dispositivo de BitLocker, protección de los dispositivos de IoT contra ataques sin conexión.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-180">Windows 10 IoT Core also implements a lightweight version of BitLocker Device Encryption, protecting IoT devices against offline attacks.</span></span> <span data-ttu-id="d0ae3-181">Esta funcionalidad tiene una dependencia fuerte en la presencia de un TPM en la plataforma, incluido el protocolo previo necesario en UEFI que toma las medidas necesarias.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-181">This capability has a strong dependency on the presence of a TPM on the platform, including the necessary pre-OS protocol in UEFI that conducts the necessary measurements.</span></span> <span data-ttu-id="d0ae3-182">Estas mediciones previo asegurarse de que el sistema operativo posterior tenga un registro definitivo de cómo se inició el sistema operativo; Sin embargo, no aplica las restricciones de ejecución.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-182">These pre-OS measurements ensure that the OS later has a definitive record of how the OS was launched; however, it does not enforce any execution restrictions.</span></span>

> [!TIP]
> <span data-ttu-id="d0ae3-183">Funcionalidad de BitLocker en Windows 10 IoT Core permite para el cifrado automático de volumen del sistema operativo basado en NTFS al enlazar todos los volúmenes de datos NTFS disponibles en él.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-183">BitLocker functionality on Windows 10 IoT Core allows for automatic encryption of NTFS-based OS volume while binding all available NTFS data volumes to it.</span></span> <span data-ttu-id="d0ae3-184">Para ello, es necesario para asegurarse de que el volumen EFIESP GUID se establece en _C12A7328-F81F-11D2-BA4B-00A0C93EC93B_.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-184">For this, it’s necessary to ensure that the EFIESP volume GUID is set to _C12A7328-F81F-11D2-BA4B-00A0C93EC93B_.</span></span>

### <a name="device-guard-on-windows-iot-core"></a><span data-ttu-id="d0ae3-185">Device Guard en Windows IoT Core</span><span class="sxs-lookup"><span data-stu-id="d0ae3-185">Device Guard on Windows IoT Core</span></span>

<span data-ttu-id="d0ae3-186">La mayoría de los dispositivos de IoT se crean como dispositivos de funciones fijas.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-186">Most IoT devices are built as fixed-function devices.</span></span> <span data-ttu-id="d0ae3-187">Esto implica que los generadores de dispositivo saben exactamente qué firmware, sistemas operativos, controladores y aplicaciones deben ejecutarse en un dispositivo determinado.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-187">This implies that device builders know exactly which firmware, operating system, drivers and applications should be running on a given device.</span></span> <span data-ttu-id="d0ae3-188">A su vez, esta información puede ser utilizado totalmente bloquear un dispositivo IoT solo tiene que permitir la ejecución de código conocida y de confianza.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-188">In turn, this information can be used to fully lockdown an IoT device by only allowing execution of known and trusted code.</span></span> <span data-ttu-id="d0ae3-189">Device Guard en Windows 10 IoT Core puede ayudar a proteger los dispositivos de IoT, lo que garantiza que no se puede ejecutar código ejecutable desconocido o que no se confía en los dispositivos bloqueados.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-189">Device Guard on Windows 10 IoT Core can help protect IoT devices by ensuring that unknown or untrusted executable code cannot be run on locked-down devices.</span></span>


## <a name="turnkey-security-on-iot-core"></a><span data-ttu-id="d0ae3-190">Seguridad de llave en mano en IoT Core</span><span class="sxs-lookup"><span data-stu-id="d0ae3-190">Turnkey Security on IoT Core</span></span>

<span data-ttu-id="d0ae3-191">Para facilitar la fácil habilitación de características clave de seguridad en dispositivos de IoT Core, Microsoft ofrece un [paquete de seguridad de llave en mano]( https://github.com/ms-iot/security/tree/master/TurnkeySecurity) que permite que los generadores de dispositivo crear completamente bloqueado de los dispositivos de IoT.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-191">To facilitate easy enablement of key security features on IoT Core devices, Microsoft is providing a [Turnkey Security Package]( https://github.com/ms-iot/security/tree/master/TurnkeySecurity) that allows device builders to build fully locked down IoT devices.</span></span> <span data-ttu-id="d0ae3-192">Le ayudará este paquete con:</span><span class="sxs-lookup"><span data-stu-id="d0ae3-192">This package will help with:</span></span>

* <span data-ttu-id="d0ae3-193">Aprovisionamiento de claves de arranque seguro y habilitar la característica en las plataformas admitidas de IoT</span><span class="sxs-lookup"><span data-stu-id="d0ae3-193">Provisioning Secure Boot keys and enabling the feature on supported IoT platforms</span></span>
* <span data-ttu-id="d0ae3-194">Instalación y configuración de cifrado del dispositivo con BitLocker</span><span class="sxs-lookup"><span data-stu-id="d0ae3-194">Setup and configuration of device encryption using BitLocker</span></span>
* <span data-ttu-id="d0ae3-195">Iniciando el bloqueo del dispositivo para solo permitir la ejecución de las aplicaciones firmadas y controladores</span><span class="sxs-lookup"><span data-stu-id="d0ae3-195">Initiating device lockdown to only allow execution of signed applications and drivers</span></span>

<span data-ttu-id="d0ae3-196">Los pasos siguientes dará lugar a través del proceso para crear una imagen de bloqueo mediante el [paquete de seguridad de llave en mano]( https://github.com/ms-iot/security/tree/master/TurnkeySecurity)</span><span class="sxs-lookup"><span data-stu-id="d0ae3-196">The following steps will lead through the process to create a lockdown image using the [Turnkey Security Package]( https://github.com/ms-iot/security/tree/master/TurnkeySecurity)</span></span>

![Crear imagen de bloqueo](../media/SecurityFlowAndCertificates/ImageLockDown.png)

### <a name="prerequisites"></a><span data-ttu-id="d0ae3-198">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="d0ae3-198">Prerequisites</span></span>

* <span data-ttu-id="d0ae3-199">Un equipo que ejecuta Windows 10 Enterprise</span><span class="sxs-lookup"><span data-stu-id="d0ae3-199">A PC running Windows 10 Enterprise</span></span>
* <span data-ttu-id="d0ae3-200">[Windows 10 SDK](https://developer.microsoft.com/en-US/windows/downloads/windows-10-sdk) : requerido para la generación de certificado</span><span class="sxs-lookup"><span data-stu-id="d0ae3-200">[Windows 10 SDK](https://developer.microsoft.com/en-US/windows/downloads/windows-10-sdk) - Required for Certificate Generation</span></span>
* <span data-ttu-id="d0ae3-201">[Windows 10 ADK](https://developer.microsoft.com/en-us/windows/hardware/windows-assessment-deployment-kit) : requerido para la generación de CAB</span><span class="sxs-lookup"><span data-stu-id="d0ae3-201">[Windows 10 ADK](https://developer.microsoft.com/en-us/windows/hardware/windows-assessment-deployment-kit) - Required for CAB generation</span></span>
* <span data-ttu-id="d0ae3-202">Plataforma de referencia: versión de hardware con el firmware de trasvase de registros, sistema operativo, controladores y aplicaciones será necesaria para bloqueo final</span><span class="sxs-lookup"><span data-stu-id="d0ae3-202">Reference platform - release hardware with shipping firmware, OS, drivers and applications will be required for final lockdown</span></span>

### <a name="development-iot-devices"></a><span data-ttu-id="d0ae3-203">Dispositivos de IoT de desarrollo</span><span class="sxs-lookup"><span data-stu-id="d0ae3-203">Development IoT Devices</span></span>

<span data-ttu-id="d0ae3-204">Windows 10 IoT Core funciona con diversos silicons que se emplean en cientos de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-204">Windows 10 IoT Core works with various silicons that are utilized in hundreds of devices.</span></span> <span data-ttu-id="d0ae3-205">De la [sugiere los dispositivos de desarrollo de IoT](../learn-about-hardware/SoCsAndCustomBoards.md), los siguientes proporcionan funcionalidad TPM de firmware de fábrica, junto con las funcionalidades de arranque seguro, arranque medido, BitLocker y Device Guard:</span><span class="sxs-lookup"><span data-stu-id="d0ae3-205">Of the [suggested IoT development devices](../learn-about-hardware/SoCsAndCustomBoards.md), the following provide firmware TPM functionality out of the box, along with Secure Boot, Measured Boot, BitLocker and Device Guard capabilities:</span></span>

* <span data-ttu-id="d0ae3-206">QUALCOMM DragonBoard 410c</span><span class="sxs-lookup"><span data-stu-id="d0ae3-206">Qualcomm DragonBoard 410c</span></span>

    <span data-ttu-id="d0ae3-207">Con el fin de habilitar el arranque seguro, puede ser necesario para aprovisionar RPMB.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-207">In order to enable Secure Boot, it may be necessary to provision RPMB.</span></span> <span data-ttu-id="d0ae3-208">Una vez que el eMMC ha sido se vacían con Windows 10 IoT Core (según las instrucciones [aquí](https://docs.microsoft.com/windows/iot-core/tutorials/quickstarter/devicesetup#using-the-iot-dashboard-dragonboard-410c), presione [Power] + [Vol +] + Vol-simultáneamente en el dispositivo cuando se inicia rápidamente y seleccione "RPMB aprovisionar" en el menú BDS.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-208">Once the eMMC has been flashed with Windows 10 IoT Core (as per instructions [here](https://docs.microsoft.com/windows/iot-core/tutorials/quickstarter/devicesetup#using-the-iot-dashboard-dragonboard-410c), press [Power] + [Vol+] + [Vol-] simultaneously on the device when powering up and select "Provision RPMB" from the BDS menu.</span></span> <span data-ttu-id="d0ae3-209">*Tenga en cuenta que esto es un paso irreversible.*</span><span class="sxs-lookup"><span data-stu-id="d0ae3-209">*Please note that this is an irreversible step.*</span></span>

* <span data-ttu-id="d0ae3-210">Intel MinnowBoardMax</span><span class="sxs-lookup"><span data-stu-id="d0ae3-210">Intel MinnowBoardMax</span></span>

    <span data-ttu-id="d0ae3-211">Para Intel MinnowBoard Max, versión de firmware debe ser 0.82 o posterior (obtener el [firmware más reciente](https://firmware.intel.com/projects/minnowboard-max)).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-211">For Intel's MinnowBoard Max, firmware version must be 0.82 or higher (get the [latest firmware](https://firmware.intel.com/projects/minnowboard-max)).</span></span> <span data-ttu-id="d0ae3-212">Para habilitar la funcionalidad de TPM, encender la placa con un teclado y pantalla adjunta y presione F2 para entrar en la configuración UEFI.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-212">To enable TPM capabilities, power up board with a keyboard & display attached and press F2 to enter UEFI setup.</span></span> <span data-ttu-id="d0ae3-213">Vaya a _el Administrador de dispositivos -> configuración del sistema -> configuración de seguridad -> PTT_ y establézcalo en  _&lt;habilitar&gt;_.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-213">Go to _Device Manager -> System Setup -> Security Configuration -> PTT_ and set it to _&lt;Enable&gt;_.</span></span> <span data-ttu-id="d0ae3-214">Presione F10 para guardar los cambios y continuar con un reinicio de la plataforma.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-214">Press F10 to save changes and proceed with a reboot of the platform.</span></span>

> [!NOTE]
> <span data-ttu-id="d0ae3-215">Raspberry Pi 2 ni 3 no son compatibles con TPM y por lo que no podemos configuramos los escenarios de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-215">Raspberry Pi 2 nor 3 do not support TPM and so we cannot configure Lockdown scenarios.</span></span>

### <a name="generate-lockdown-packages"></a><span data-ttu-id="d0ae3-216">Generar paquetes de bloqueo</span><span class="sxs-lookup"><span data-stu-id="d0ae3-216">Generate Lockdown Packages</span></span>

1. <span data-ttu-id="d0ae3-217">Descargue el [DeviceLockDown Script](https://github.com/ms-iot/security/tree/master/TurnkeySecurity) paquete, que contiene todas las herramientas adicionales y los scripts necesarios para configurar y bloqueo de dispositivos</span><span class="sxs-lookup"><span data-stu-id="d0ae3-217">Download the [DeviceLockDown Script](https://github.com/ms-iot/security/tree/master/TurnkeySecurity) package, which contains all of the additional tools and scripts required for configuring and locking down devices</span></span>
2. <span data-ttu-id="d0ae3-218">Inicie una consola administrativa PowerShell (PS) en los equipos Windows 10 y navegue hasta la ubicación del script descargado.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-218">Start an Administrative PowerShell (PS) console on your Windows 10 PC and navigate to the location of the downloaded script.</span></span>
3. <span data-ttu-id="d0ae3-219">Montaje de la plataforma de hardware de referencia (que se ejecuta la imagen desbloqueada) a su equipo a través de recurso compartido de red con</span><span class="sxs-lookup"><span data-stu-id="d0ae3-219">Mount your reference hardware platform (running the unlocked image) to your PC via network share using</span></span>

    ```powershell
    net use \\a.b.c.d\c$ /user:username password
    ```

4. <span data-ttu-id="d0ae3-220">Generar claves para su dispositivo mediante</span><span class="sxs-lookup"><span data-stu-id="d0ae3-220">Generate keys for your device using</span></span>

    ```powershell
    .\GenerateKeys.ps1 -OemName '<your oem name>' -outputPath '<output directory>'
    ```

    * <span data-ttu-id="d0ae3-221">En la carpeta de salida especificado con el sufijo adecuado, se generan las claves y certificados.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-221">The keys and certificates are generated in the specified output folder with appropriate suffix.</span></span>
    * <span data-ttu-id="d0ae3-222">**Proteger las claves generadas** como el dispositivo confiará en los archivos binarios firmados con estas claves solo después del bloqueo.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-222">**Secure your generated keys** as the device will trust binaries signed with these keys only after lockdown.</span></span>
    * <span data-ttu-id="d0ae3-223">Puede omitir este paso y usar las claves generadas previamente solo para pruebas</span><span class="sxs-lookup"><span data-stu-id="d0ae3-223">You may skip this step and use the pre-generated keys for testing only</span></span>

5. <span data-ttu-id="d0ae3-224">Configure _settings.xml_</span><span class="sxs-lookup"><span data-stu-id="d0ae3-224">Configure _settings.xml_</span></span>

    * <span data-ttu-id="d0ae3-225">Sección general: Especifique los directorios de paquete</span><span class="sxs-lookup"><span data-stu-id="d0ae3-225">General section : Specify the package directories</span></span>
    * <span data-ttu-id="d0ae3-226">Sección de herramientas: Establecer la ruta de acceso para las herramientas</span><span class="sxs-lookup"><span data-stu-id="d0ae3-226">Tools section : Set the path for the tools</span></span>
        * <span data-ttu-id="d0ae3-227">Windows10KitsRoot `(e.g. <Windows10KitsRoot>C:\Program Files (x86)\Windows Kits\10\</Windows10KitsRoot>)`</span><span class="sxs-lookup"><span data-stu-id="d0ae3-227">Windows10KitsRoot `(e.g. <Windows10KitsRoot>C:\Program Files (x86)\Windows Kits\10\</Windows10KitsRoot>)`</span></span>
        * <span data-ttu-id="d0ae3-228">WindowsSDKVersion `(e.g. <WindowsSDKVersion>10.0.15063.0</WindowsSDKVersion>)`</span><span class="sxs-lookup"><span data-stu-id="d0ae3-228">WindowsSDKVersion `(e.g. <WindowsSDKVersion>10.0.15063.0</WindowsSDKVersion>)`</span></span>
            * <span data-ttu-id="d0ae3-229">Versión del SDK instalado en el equipo está bajo `C:\Program Files (x86)\Windows Kits\10\`</span><span class="sxs-lookup"><span data-stu-id="d0ae3-229">SDK version installed on your machine is under `C:\Program Files (x86)\Windows Kits\10\`</span></span>
    * <span data-ttu-id="d0ae3-230">Sección SecureBoot: Especifique qué claves que se usarán para el arranque seguro (PK y SB claves)</span><span class="sxs-lookup"><span data-stu-id="d0ae3-230">SecureBoot section : Specify which keys to use for secure boot (PK and SB keys)</span></span>
    * <span data-ttu-id="d0ae3-231">Sección de BitLocker: Especifique un certificado para la recuperación de datos de Bitlocker (clave DRA)</span><span class="sxs-lookup"><span data-stu-id="d0ae3-231">BitLocker section : Specify a certificate for Bitlocker data recovery (DRA key)</span></span>
    * <span data-ttu-id="d0ae3-232">Sección SIPolicy: Especificar los certificados en los que deben ser de confianza</span><span class="sxs-lookup"><span data-stu-id="d0ae3-232">SIPolicy section : Specify certs that should be trusted</span></span>
        * <span data-ttu-id="d0ae3-233">ScanPath : Ruta de acceso del dispositivo para el análisis de los archivos binarios, `\\a.b.c.d\C$`</span><span class="sxs-lookup"><span data-stu-id="d0ae3-233">ScanPath : Path of the device for scanning binaries , `\\a.b.c.d\C$`</span></span>
        * <span data-ttu-id="d0ae3-234">actualizar: Firmante de la SIPolicy (claves PAUTH)</span><span class="sxs-lookup"><span data-stu-id="d0ae3-234">Update   : Signer of the SIPolicy (PAUTH keys)</span></span>
        * <span data-ttu-id="d0ae3-235">Usuario: Certificados de modo de usuario (claves UMCI)</span><span class="sxs-lookup"><span data-stu-id="d0ae3-235">User     : User mode certificates (UMCI keys)</span></span> 
        * <span data-ttu-id="d0ae3-236">Kernel: Certificados de modo kernel (claves KMCI)</span><span class="sxs-lookup"><span data-stu-id="d0ae3-236">Kernel   : Kernel mode certificates (KMCI keys)</span></span>
    * <span data-ttu-id="d0ae3-237">Empaquetado: Especifique la configuración para la generación de paquetes</span><span class="sxs-lookup"><span data-stu-id="d0ae3-237">Packaging : Specify the settings for the package generation</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d0ae3-238">Con el fin de ayudar a probar durante el ciclo de desarrollo inicial, Microsoft ha proporcionado los certificados y claves generadas previamente en su caso.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-238">In order to assist with testing during the initial development cycle, Microsoft has provided pre-generated keys and certificates where appropriate.</span></span>  <span data-ttu-id="d0ae3-239">Esto implica que los archivos binarios de Microsoft Test, desarrollo y versiones preliminares se consideran de confianza.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-239">This implies that Microsoft Test, Development and Pre-Release binaries are considered trusted.</span></span>  <span data-ttu-id="d0ae3-240">Durante la creación de un producto final y generación de imágenes, asegúrese de quitar estas dirija y usar sus propias claves para garantizar que un dispositivo totalmente bloqueado.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-240">During final product creation and image generation, be sure to remove these certifcates and use your own keys to ensure a fully locked down device.</span></span>

<span data-ttu-id="d0ae3-241">6. ejecutar los comandos siguientes para generar paquetes necesarios:</span><span class="sxs-lookup"><span data-stu-id="d0ae3-241">6.Execute the following commands to generate required packages:</span></span>

    ```powershell
    Import-Module .\IoTTurnkeySecurity.psm1
    # Generate the security packages for retail
    New-IoTTurnkeySecurity -ConfigFileName .\settings.xml
    (or)
    # Generate the security packages for test
    New-IoTTurnkeySecurity -ConfigFileName .\settings.xml -Test
    ```

### <a name="test-lockdown-packages"></a><span data-ttu-id="d0ae3-242">Probar los paquetes de bloqueo</span><span class="sxs-lookup"><span data-stu-id="d0ae3-242">Test Lockdown packages</span></span>
<span data-ttu-id="d0ae3-243">Puede probar los paquetes generados por instalarlos manualmente en un dispositivo desbloqueado mediante los pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="d0ae3-243">You can test the generated packages by manually installing them on a unlocked device by the following steps</span></span>

1. <span data-ttu-id="d0ae3-244">Flash del dispositivo con la imagen desbloqueado (imagen utilizada para el análisis en el paso anterior).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-244">Flash the device with the unlocked image (image used for scanning in earlier step).</span></span>
2. <span data-ttu-id="d0ae3-245">Conectarse al dispositivo ([mediante SSH](../connect-your-device/SSH.md) o mediante [Powershell](../connect-your-device/PowerShell.md))</span><span class="sxs-lookup"><span data-stu-id="d0ae3-245">Connect to the device ([using SSH](../connect-your-device/SSH.md) or using [Powershell](../connect-your-device/PowerShell.md))</span></span>
3. <span data-ttu-id="d0ae3-246">Copie los siguientes archivos .cab en el dispositivo en un directorio, p. ej. `c:\OemInstall`</span><span class="sxs-lookup"><span data-stu-id="d0ae3-246">Copy the following .cab files to the device under a directory e.g. `c:\OemInstall`</span></span>
    * <span data-ttu-id="d0ae3-247">OEM.Custom.Cmd.cab</span><span class="sxs-lookup"><span data-stu-id="d0ae3-247">OEM.Custom.Cmd.cab</span></span>
    * <span data-ttu-id="d0ae3-248">OEM.Security.BitLocker.cab</span><span class="sxs-lookup"><span data-stu-id="d0ae3-248">OEM.Security.BitLocker.cab</span></span>
    * <span data-ttu-id="d0ae3-249">OEM.Security.SecureBoot.cab</span><span class="sxs-lookup"><span data-stu-id="d0ae3-249">OEM.Security.SecureBoot.cab</span></span>
    * <span data-ttu-id="d0ae3-250">OEM.Security.DeviceGuard.cab</span><span class="sxs-lookup"><span data-stu-id="d0ae3-250">OEM.Security.DeviceGuard.cab</span></span>
4. <span data-ttu-id="d0ae3-251">Iniciar el almacenamiento provisional de los paquetes generados por emitiendo los comandos siguientes</span><span class="sxs-lookup"><span data-stu-id="d0ae3-251">Initiate staging of the generated packages by issueing the following commands</span></span>

    ```C
    applyupdate -stage c:\OemInstall\OEM.Custom.Cmd.cab
    ```
    <span data-ttu-id="d0ae3-252">Si está utilizando la imagen personalizada y, después, tendrá que *omitir* este archivo y editar manualmente el `c:\windows\system32\oemcustomization.cmd` con el contenido disponible en `Output\OEMCustomization\OEMCustomization.cmd` archivo</span><span class="sxs-lookup"><span data-stu-id="d0ae3-252">If you are using custom image, then you will have to *skip* this file and manually edit the `c:\windows\system32\oemcustomization.cmd` with the contents available in `Output\OEMCustomization\OEMCustomization.cmd` file</span></span>

    ```C
    applyupdate -stage c:\OemInstall\OEM.Security.BitLocker.cab
    applyupdate -stage c:\OemInstall\OEM.Security.SecureBoot.cab
    applyupdate -stage c:\OemInstall\OEM.Security.DeviceGuard.cab

5. Finally, commit the packages via

    ```C
    applyupdate -commit
    ```

6. <span data-ttu-id="d0ae3-253">El dispositivo se reiniciará en el sistema operativo (mostrando gears) para instalar los paquetes de actualización y se reiniciará al sistema operativo principal.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-253">The device will reboot into update OS (showing gears) to install the packages and will reboot again to main OS.</span></span>  <span data-ttu-id="d0ae3-254">Una vez que el dispositivo se reinicia en MainOS, se habilitará el arranque seguro y debe exponerse a SIPolicy.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-254">Once the device reboots back into MainOS, Secure Boot will be enabled and SIPolicy should be engaged.</span></span>
7. <span data-ttu-id="d0ae3-255">Reinicio del dispositivo para activar el cifrado de Bitlocker.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-255">Reboot the device again to activate the Bitlocker encryption.</span></span>
8. <span data-ttu-id="d0ae3-256">Probar las características de seguridad</span><span class="sxs-lookup"><span data-stu-id="d0ae3-256">Test the security features</span></span>
    * <span data-ttu-id="d0ae3-257">SecureBoot: pruebe `bcdedit /debug on` , obtendrá un error que indica que el valor está protegido por la directiva de arranque seguro</span><span class="sxs-lookup"><span data-stu-id="d0ae3-257">SecureBoot: try `bcdedit /debug on` , you will get an error stating that the value is protected by secure boot policy</span></span>
    * <span data-ttu-id="d0ae3-258">BitLocker: Ejecute `fvecon -status c:`, obtendrá el estado mencionar *en Encrypted, tiene datos de recuperación (clave externa), tiene datos de TPM, seguro, partición de arranque, solo el espacio utilizado*</span><span class="sxs-lookup"><span data-stu-id="d0ae3-258">BitLocker: Run `fvecon -status c:`, you will get the status mentioning *On, Encrypted, Has Recovery Data (external key), Has TPM Data, Secure, Boot Partition, Used Space Only*</span></span>
    * <span data-ttu-id="d0ae3-259">DeviceGuard: Ejecute cualquier binario sin signo o un archivo binario firmado con certificado no está en la lista SIPolicy y confirme que no puede ejecutar.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-259">DeviceGuard : Run any unsigned binary or a binary signed with certificate not in the SIPolicy list and confirm that it fails to run.</span></span>

### <a name="generate-lockdown-image"></a><span data-ttu-id="d0ae3-260">Generar imagen de bloqueo</span><span class="sxs-lookup"><span data-stu-id="d0ae3-260">Generate Lockdown image</span></span>

<span data-ttu-id="d0ae3-261">Después de comprobar que los paquetes de bloqueo de seguridad funcionan según la configuración definida anteriormente, puede incluir estos paquetes en la imagen siguiendo el siguiente les indican los pasos.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-261">After validating that the lockdown packages are working as per the settings defined earlier, you can then include these packages into the image by following the below given steps.</span></span> <span data-ttu-id="d0ae3-262">Leer el [IoT fabricación guía](https://aka.ms/iotcoreguide) para obtener instrucciones de creación de imagen personalizada.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-262">Read the [IoT manufacturing guide](https://aka.ms/iotcoreguide) for custom image creation instructions.</span></span>

1. <span data-ttu-id="d0ae3-263">En el directorio de área de trabajo, actualice los siguientes archivos desde el directorio de salida generado anterior</span><span class="sxs-lookup"><span data-stu-id="d0ae3-263">In the workspace directory, update the following files from the generated output directory above</span></span>
    * <span data-ttu-id="d0ae3-264">SecureBoot: `Copy ..\Output\SecureBoot\*.bin  ..\Workspace\Common\Packages\Security.SecureBoot`</span><span class="sxs-lookup"><span data-stu-id="d0ae3-264">SecureBoot : `Copy ..\Output\SecureBoot\*.bin  ..\Workspace\Common\Packages\Security.SecureBoot`</span></span>
      * <span data-ttu-id="d0ae3-265">SetVariable_db.bin</span><span class="sxs-lookup"><span data-stu-id="d0ae3-265">SetVariable_db.bin</span></span>
      * <span data-ttu-id="d0ae3-266">SetVariable_kek.bin</span><span class="sxs-lookup"><span data-stu-id="d0ae3-266">SetVariable_kek.bin</span></span>
      * <span data-ttu-id="d0ae3-267">SetVariable_pk.bin</span><span class="sxs-lookup"><span data-stu-id="d0ae3-267">SetVariable_pk.bin</span></span>
    * <span data-ttu-id="d0ae3-268">BitLocker: `Copy ..\Output\Bitlocker\*.* ..\Workspace\Common\Packages\Security.Bitlocker`</span><span class="sxs-lookup"><span data-stu-id="d0ae3-268">BitLocker : `Copy ..\Output\Bitlocker\*.* ..\Workspace\Common\Packages\Security.Bitlocker`</span></span>
      * <span data-ttu-id="d0ae3-269">DETask.xml</span><span class="sxs-lookup"><span data-stu-id="d0ae3-269">DETask.xml</span></span>
      * <span data-ttu-id="d0ae3-270">Security.Bitlocker.wm.xml</span><span class="sxs-lookup"><span data-stu-id="d0ae3-270">Security.Bitlocker.wm.xml</span></span>
      * <span data-ttu-id="d0ae3-271">setup.bitlocker.cmd</span><span class="sxs-lookup"><span data-stu-id="d0ae3-271">setup.bitlocker.cmd</span></span>
    * <span data-ttu-id="d0ae3-272">DeviceGuard: `Copy ..\Output\DeviceGuard\*.*  ..\Workspace\Common\Packages\Security.DeviceGuard`</span><span class="sxs-lookup"><span data-stu-id="d0ae3-272">DeviceGuard : `Copy ..\Output\DeviceGuard\*.*  ..\Workspace\Common\Packages\Security.DeviceGuard`</span></span>
      * <span data-ttu-id="d0ae3-273">SIPolicyOn.p7b</span><span class="sxs-lookup"><span data-stu-id="d0ae3-273">SIPolicyOn.p7b</span></span>
      * <span data-ttu-id="d0ae3-274">SIPolicyOff.p7b</span><span class="sxs-lookup"><span data-stu-id="d0ae3-274">SIPolicyOff.p7b</span></span>
  
2. <span data-ttu-id="d0ae3-275">Agregar RetailOEMInput.xml y TestOEMInput.xml bajo el directorio ProductName con Id. de característica de paquete de bloqueo</span><span class="sxs-lookup"><span data-stu-id="d0ae3-275">Add RetailOEMInput.xml and TestOEMInput.xml under the ProductName directory with lockdown package feature ID</span></span>
    * `<Feature>SEC_BITLOCKER</Feature>`
    * `<Feature>SEC_SECUREBOOT</Feature>`
    * `<Feature>SEC_DEVICEGUARD</Feature>`
3. <span data-ttu-id="d0ae3-276">Volver a generar la imagen</span><span class="sxs-lookup"><span data-stu-id="d0ae3-276">Re-generate Image</span></span>
    * <span data-ttu-id="d0ae3-277">`buildpkg all` (Esto genera nuevos paquetes de bloqueo según por encima de los archivos de directiva)</span><span class="sxs-lookup"><span data-stu-id="d0ae3-277">`buildpkg all` (this generates new lockdown packages based on above policy files)</span></span>
    * <span data-ttu-id="d0ae3-278">`buildimage ProductName test(or)retail`  (Esto genera Flash.ffu nueva)</span><span class="sxs-lookup"><span data-stu-id="d0ae3-278">`buildimage ProductName test(or)retail`  (this generates new Flash.ffu)</span></span>
4. <span data-ttu-id="d0ae3-279">El dispositivo con este nuevo Flash.ffu Flash y validar las características de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-279">Flash the device with this new Flash.ffu and validate the security features.</span></span>

<span data-ttu-id="d0ae3-280">Consulte [SecureSample](https://github.com/ms-iot/iot-adk-addonkit/tree/master/Workspace/Source-arm/Products/SecureSample) como un ejemplo de una configuración de la placa de bloqueo dragon.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-280">See [SecureSample](https://github.com/ms-iot/iot-adk-addonkit/tree/master/Workspace/Source-arm/Products/SecureSample) as an example of a lockdown dragon board configuration.</span></span>

<span data-ttu-id="d0ae3-281">Como alternativa, puede generar los paquetes de seguridad en el propio IoTCore Shell, consulte [agregar paquetes de seguridad](https://github.com/ms-iot/iot-adk-addonkit/tree/master/Tools#adding-security-packages) para obtener los detalles.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-281">Alternatively, you can generate the security packages in the IoTCore Shell itself, see [adding security packages](https://github.com/ms-iot/iot-adk-addonkit/tree/master/Tools#adding-security-packages) for the details.</span></span>


### <a name="developing-with-codesigning-enforcement-enabled"></a><span data-ttu-id="d0ae3-282">Desarrollo con el cumplimiento de la firma de código habilitado</span><span class="sxs-lookup"><span data-stu-id="d0ae3-282">Developing with CodeSigning Enforcement Enabled</span></span>

<span data-ttu-id="d0ae3-283">Una vez que se generan los paquetes y el bloqueo está activado, todos los archivos binarios que introdujo en la imagen durante el desarrollo deberá firmarse de forma adecuada.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-283">Once the packages are generated and lockdown is activated, any binaries introduced into the image during development will need to be signed appropriately.</span></span> <span data-ttu-id="d0ae3-284">Asegúrese de que los archivos binarios de modo de usuario se firman con la clave _. \Keys\ \*\*\*-UMCI.pfx_.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-284">Ensure that your user-mode binaries are signed with the key  _.\Keys\ \*\*\*-UMCI.pfx_.</span></span> <span data-ttu-id="d0ae3-285">Para la firma de modo de kernel, como para los controladores, deberá especificar sus propias claves de firmas y asegúrese de se incluyen también en el SIPolicy anterior.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-285">For kernel-mode signing, such as for drivers, you’ll need to specify your own signing keys and make sure that they are also included in the SIPolicy above.</span></span>

### <a name="unlocking-encrypted-drives"></a><span data-ttu-id="d0ae3-286">Desbloquear unidades cifradas</span><span class="sxs-lookup"><span data-stu-id="d0ae3-286">Unlocking Encrypted Drives</span></span>

<span data-ttu-id="d0ae3-287">Durante el desarrollo y pruebas, al intentar leer el contenido de un dispositivo cifrado sin conexión (por ejemplo, tarjeta SD para eMMC MinnowBoardMax o de DragonBoard con el modo de almacenamiento masivo USB), 'diskpart' puede usarse para asignar una letra de unidad al volumen de datos y MainOS (vamos a Suponga v: para MainOS y w: por datos).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-287">During development and testing, when attempting to read contents from an encrypted device offline (e.g. SD card for MinnowBoardMax or DragonBoard's eMMC through USB mass storage mode), 'diskpart' may be used to assign a drive letter to MainOS and Data volume (let's assume v: for MainOS and w: for Data).</span></span>
<span data-ttu-id="d0ae3-288">Los volúmenes aparecerán bloqueados y necesita desbloquea manualmente.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-288">The volumes will appear locked and need to be manually unlocked.</span></span> <span data-ttu-id="d0ae3-289">Esto puede realizarse en cualquier equipo que tenga instalado el certificado de OEM DRA.pfx (incluido en el [DeviceLockDown ejemplo](https://github.com/ms-iot/security/tree/master/TurnkeySecurity)).</span><span class="sxs-lookup"><span data-stu-id="d0ae3-289">This can be done on any machine that has the OEM-DRA.pfx certificate installed (included in the [DeviceLockDown sample](https://github.com/ms-iot/security/tree/master/TurnkeySecurity)).</span></span> <span data-ttu-id="d0ae3-290">Instale el archivo PFX y, a continuación, ejecute los siguientes comandos desde un símbolo del sistema administrativo:</span><span class="sxs-lookup"><span data-stu-id="d0ae3-290">Install the PFX and then run the following commands from an administrative CMD prompt:</span></span>

* `manage-bde -unlock v: -cert -cf OEM-DRA.cer`
* `manage-bde -unlock w: -cert -cf OEM-DRA.cer`

<span data-ttu-id="d0ae3-291">Si necesita el contenido que se accede con frecuencia sin conexión, desbloqueo automático de BitLocker puede configurarse para los volúmenes después de la inicial desbloquear mediante los siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="d0ae3-291">If the contents need to be frequently accessed offline, BitLocker autounlock can be set up for the volumes after the initial unlock using the following commands:</span></span>

* `manage-bde -autounlock v: -enable`
* `manage-bde -autounlock w: -enable`

### <a name="disabling-bitlocker"></a><span data-ttu-id="d0ae3-292">Deshabilitar BitLocker</span><span class="sxs-lookup"><span data-stu-id="d0ae3-292">Disabling BitLocker</span></span>

<span data-ttu-id="d0ae3-293">Surgiera existe una necesidad de deshabilitar temporalmente BitLocker, iniciar una sesión remota de PowerShell con el dispositivo de IoT y ejecute el siguiente comando: `sectask.exe -disable`.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-293">Should there arise a need to temporarily disable BitLocker, initate a remote PowerShell session with your IoT device and run the following command: `sectask.exe -disable`.</span></span>  

> [!NOTE]
> <span data-ttu-id="d0ae3-294">Cifrado del dispositivo se volverá a habilitar, en el arranque de dispositivos posterior a menos que la tarea programada de cifrado está deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="d0ae3-294">Device encryption will be re-enabled on subsequent device boot unless the scheduled encryption task is disabled.</span></span>


